<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" type="image/x-icon" href="odlogo_small.ico" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
    <meta name="keywords" content="object detection, object recognition, detection, recognition, vision, computer vision, image processing, point cloud, opens ource"/>
    <meta name="description" content="Open Detection, OD, is a standalone open source project for object detection and recognition in images and 3D point clouds."/>
    <meta name="author" content="Kripasindhu Sarkar"/>
<title>Open Detection: /home/abhi/Desktop/Thesis/GSOC/target2/opendetection/doc/doxygen/tutorials_doxygen/gsoc2016_blog_abhishek.md Source File</title>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <style>
        .carousel-inner > .item > img,
        .carousel-inner > .item > a > img {
            width: 70%;
            margin: auto;
        }
    </style>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Open Detection"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open Detection
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>OD</span></a></li>
      <li><a href="tutorial_root.html"><span>User&#160;Guide</span></a></li>
      <li class="current"><a href="usergroup0.html"><span>API&#160;Documentation</span></a></li>
      <li><a href="usergroup1.html"><span>GSoC16&#160;Blogs</span></a></li>
      <li><a href="idea_list_gsoc2016.html"><span>GSoC&#160;2016&#160;Ideas</span></a></li>
      <li><a href="installation_instruction.html"><span>Downloads</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('gsoc2016__blog__abhishek_8md.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/home/abhi/Desktop/Thesis/GSOC/target2/opendetection/doc/doxygen/tutorials_doxygen/gsoc2016_blog_abhishek.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;GSoC 2016 Blog - Abhishek {#gsoc2016_blog_abhishek}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;====</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;[TOC]</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;CNN based <span class="keywordtype">object</span> localization and recognition <span class="keywordflow">for</span> openDetection library  {#gsoc2016_blog_abhishek1}</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;====</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  - [Link to Proposal](https:<span class="comment">//summerofcode.withgoogle.com/serve/6621875723567104/) </span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  - [Link to working branch](https:<span class="comment">//github.com/abhi-kumar/opendetection/tree/cnn_cpu_gpu)</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;General Description  {#general_description}</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;===</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;The following blog has been modified to accompany the entire GSOC project duration. The code, commits and examples explained in <span class="keyword">this</span> blog is related to the commits that have been made to the branch cnn_cpu_gpu as mentioned in <span class="keyword">this</span> [link](https:<span class="comment">//github.com/abhi-kumar/opendetection/tree/cnn_cpu_gpu). The set of commits to other temporary branches and the commits with unsuccessful builds from the same have been corrected and put into the mentioned branch with a set of around 20 commits. On the whole, the entire project has been mentioned here as a project report.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;The set of other branches, <span class="keywordflow">for</span> reference purposes can be found here: [link](https:<span class="comment">//github.com/abhi-kumar/opendetection/tree/master)</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;The project started with the first basic task of making the repository compile on a cpu platform. Examples of Mnist Classifier, custom cnn caffe solver maker, etc were added. After the availability of a gpu based system, the corresponding work was translated to that system. Later the work was combined and <span class="keyword">new</span> additions like AAM classifier, custom trainer, segnet classifier, annotator, selective search localization, etc, were added. The upcoming part of the blog emphasizes on the important commits made, including all the successful commits to one unified single branch in a cronological order. This branch was specifically created to explain the work done in the GSOC period. It also includes the usage and explanation of the examples <span class="keywordflow">for</span> user feasibility. The earlier blog posts have been pushed as later sections. Link to commits to other branches (all already combined and pushed to cnn_cpu_gpu branch and explained below) are also mentioned at the end <span class="keywordflow">for</span> reference.</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;Note: The following commits were not the only ones, a set of commits have been combined and stated here, to facilitate clear explanation and organization.</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;Commit 1  {#commit1}</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;===</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;This commit, [link to commit: First attempt to make cpu and gpu repos together](https:<span class="comment">//github.com/abhi-kumar/opendetection/commit/245f821631452de18aaad13bab3e1f8fd7f333a4), was issued to resolve the earlier problem faced while compiling the library. Earlier, even with the option of WITH_GPU=OFF in cmake, the library fetched for cuda and gpu based files in the system. To resolve the following changes were applied. </span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;The task was to take a flag from CMakeLists files into the source codes in order proper management of inclusion of libraries, thus, in CmakeLists.txt files, \code{.txt}</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keywordflow">if</span> (WITH_GPU) #This is the cmake option variable</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  target_compile_definitions(<span class="stringliteral">&quot;${LIB_NAME}&quot;</span> PUBLIC WITH_GPU=${WITH_GPU})</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;endif()</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;\endcode, was added. The flag WITH_GPU now was translated into the source codes. This was done to files, detectors/global3D/CMakeLists.txt, and common/CMakeLists.txt. </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;This particular flag, WITH_GPU was taken into four set of files, common/utils/ODFeatureDetector2D.cpp, common/utils/ODFeatureDetector2D.h, detectors/local2D/detection/simple_ransac_detection/RobustMatcher.cpp and detectors/local2D/detection/simple_ransac_detection/RobustMatcher.h.  Herein, <span class="keywordflow">for</span> example, cuda variable declaration, involvement of gpu based variables, and inclusion of cuda libraries were put inside the flag WITH_GPU, eg, \code{.txt}</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#if(WITH_GPU)</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor"></span>  cv::Ptr&lt;cv::cuda::DescriptorMatcher&gt; matcher_gpu_;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor"></span>\endcode</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;The third change was to include the linking libraries in CMakeLists.txt files of specific gpu based libraries with the cmake option WITH_GPU option. The library linkage siftgpu in the file detectors/global3D/CMakeLists.txt, was modified to \code{.txt}</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keywordflow">if</span>(WITH_GPU)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  set(SUBSYS_DEPS ${SUBSYS_DEPS} siftgpu)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;endif()</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;\endcode. </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;The library then compiled successfully on my laptop(cpu system) as well as my PC(Nvidia 980 TI based gpu system). </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;Happy Coding!!!!</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;Commit 2 {#commit2}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;===</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;This commit, [link to commit:CNN_CPU branch successfully added](https:<span class="comment">//github.com/abhi-kumar/opendetection/commit/3c4a12b5711e84f2145851b526ab2e84d9127889), was issued to add cnn-caffe based applications, only for cpu based systems, for now. The commit shows 42055 files changes, its because Mnist image dataset was added in order to introduce the object classifier trainer in the commit. Its a combination of set of commits made earler, put here together for better explanation of each of them. The links to these frangmented commits are also mentioned here.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;To better understand neural networks, please refer to [ARTIFICIAL NEURAL NETWORKS AND THE MAGIC BEHIND – INTRODUCTORY CHAPTER](https:<span class="comment">//abhishek4273.com/2015/11/01/artificial-neural-networks-and-the-magic-behind-introductory-chapter/)</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;To <span class="keyword">get</span> into the working of mathematics behind neural networks, please refer to [ARTIFICIAL NEURAL NETWORKS AND THE MAGIC BEHIND – CHAPTER 1](https:<span class="comment">//abhishek4273.com/2015/11/04/artificial-neural-networks-and-the-magic-behind-chapter-1/)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;To understand as to how every part of caffe works, please refer to [ANN: CHAPTER 3. DEEP LEARNING USING CAFFE-PYTHON](https:<span class="comment">//abhishek4273.com/2016/02/07/ann-chapter-3-deep-learning-using-caffe-python/).</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;2.1)Enabling caffe inclusion, commit 2.1 {#commit2_first_change}</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;---</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;The first change, [link to the fragmented part commit](https:<span class="comment">//github.com/abhi-kumar/opendetection/commit/166b6426acbc3253ee53d09a8ce240d3739c8762), to enable the compilation of based codes, the file, cmake/od_mandatory_dependency.cmake, was changed. Herein, caffe library was made as a mandatory dependency and the libraries and include directories were added. </span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;2.2)Adding cnn based classifier, commit 2.2 {#commit2_second_change}</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;---</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;The next part, was to add a cnn based classifier, based on caffe library, to the opendetection source. The [fragmented commit: Commit <span class="keywordflow">for</span> Mnist Classification Example Using Caffe Library](https:<span class="comment">//github.com/abhi-kumar/opendetection/commit/166b6426acbc3253ee53d09a8ce240d3739c8762), involved additions of 7 code source files, 1 trained binary file and 5 sample test images.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;2.2.1) Enabling cpu gpu mode <span class="keywordflow">switch</span> {#commit2_second_change_1}</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;---</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;The file, detectors/global2D/CMakeLists.txt, was added the following lines \code{.txt}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;ADD_DEFINITIONS(</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  -std=c++11 </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  ${Caffe_DEFINITIONS}</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;\endcode</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;This was to make sure that, <span class="keywordflow">while</span> invoking caffe, the mode can be specified without compilation errors.</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;2.2.2) Classification base <span class="keyword">class </span>{#commit2_second_change_2}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;---</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;The base <span class="keyword">class </span>for cnn based classification, is ODConvClassification, and is introduced with two new files, detectors/global2D/detection/ODConvClassification.h and detectors/global2D/detection/ODConvClassification.cpp.</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;Lets talk about the codes in these files.</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;It involves the inclusion of following opendetection libraries</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;\code{.h}</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#include &quot;common/pipeline/ODDetector.h&quot;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &quot;common/pipeline/ODScene.h&quot;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &quot;common/utils/utils.h&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &quot;common/utils/ODFeatureDetector2D.h&quot;</span> </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;\endcode</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;The ODDetector.h is included in order to make sure that the ODConvolutionClassification is a derivative of ODDetector <span class="keyword">class</span>.</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;Opencv library</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;\code{.h}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#include &lt;opencv2/opencv.hpp&gt;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;\endcode</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;is added to make sure that <a class="code" href="classimage.html">image</a> loading and saving is done <span class="keyword">using</span> the Mat constructor</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;A set of general c++ header are also added</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;\code{.h}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;\endcode</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;Three header files from caffe library are added in order to make sure that caffe library can be succesfully included. </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;\code{.h}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#include &quot;caffe/caffe.hpp&quot;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#include &quot;caffe/util/io.hpp&quot;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#include &quot;caffe/blob.hpp&quot;</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;\endcode</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;Under the <span class="keyword">namespace </span>od::g2d, the class at this stage had the following public variables, see comments in code.</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keywordtype">string</span> weightModelFileLoaction;   <span class="comment">// Stores the trained weight caffemodel&#39;s location</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keywordtype">string</span> networkFileLocation;   <span class="comment">// Stores the network prototxt file&#39;s location</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keywordtype">string</span> imageFileLocation;     <span class="comment">// Stores the test image&#39;s location</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;Datum strucBlob;      <span class="comment">// A structure to load the test image</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;BlobProto protoBlob;      <span class="comment">// Medium for conversion</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;vector&lt;Blob&lt;float&gt;*&gt; inputBlob;   <span class="comment">// Modified structure to be given to caffe network </span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;\endcode</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;\n </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;At <span class="keyword">this</span> stage, the classifier had 8 functions which were created <span class="keywordflow">for</span> classification purpose, and the 4 functions which had to be included because the base <span class="keyword">class </span>had them as abstract.</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;**Function1**</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keywordtype">void</span> ODConvClassification::setWeightModelFileLocation(<span class="keywordtype">string</span> location)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  ODConvClassification::weightModelFileLoaction = location;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;\endcode</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;It is <span class="keywordflow">for</span> taking the weight caffemodel<span class="stringliteral">&#39;s location from user and storing in the string weightModelFileLoaction.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="stringliteral"> </span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="stringliteral">**Function2**</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="stringliteral">void ODConvClassification::setNetworkModelFileLocation(string location)</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="stringliteral">  networkFileLocation = location;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="stringliteral">It is for taking the network prototxt file&#39;</span>s location from user and storing in the <span class="keywordtype">string</span> networkFileLocation.</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;**Function3**</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keywordtype">void</span> ODConvClassification::setImageFileLocation(<span class="keywordtype">string</span> location)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  imageFileLocation = location;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;\endcode </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;It is <span class="keywordflow">for</span> taking the test_image file<span class="stringliteral">&#39;s location from user and storing in the string imageFileLocation.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="stringliteral">**Function 4, 5 and 6**</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="stringliteral">string ODConvClassification::getWeightModelFileLocation()</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="stringliteral">  cout &lt;&lt; &quot;Weight Model File Location = &quot; &lt;&lt; weightModelFileLoaction &lt;&lt; endl;</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="stringliteral">  return weightModelFileLoaction;</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="stringliteral">string ODConvClassification::getNetworkModelFileLocation()</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="stringliteral">  cout &lt;&lt; &quot;Network Model File Location = &quot; &lt;&lt; networkFileLocation &lt;&lt; endl;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="stringliteral">  return networkFileLocation;</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="stringliteral">string ODConvClassification::getImageFileLocation()</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="stringliteral">  cout &lt;&lt; &quot;Image File Location = &quot; &lt;&lt; imageFileLocation &lt;&lt; endl;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="stringliteral">  return imageFileLocation;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="stringliteral">These are retrieving the the three variables, weightModelFileLoaction, networkFileLocation and imageFileLocation.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="stringliteral">**Function 7**</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="stringliteral">The function, setTestBlob, is one of the very important functions. It takes the image and converts it into the format required by the caffe library. It takes three inputs, </span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="stringliteral">  - numChannels: Number of channels in image. If grayscale image it has to be 1, else if the image is in RGB or HSV format, then it has to be 3.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="stringliteral">  - imgHeight: Height to which it should be resized to fit into the caffe network.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="stringliteral">  - imgWidth: Width to which it should be resized to fit into the caffe network.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="stringliteral">if (!ReadImageToDatum(imageFileLocation, numChannels, imgHeight, imgWidth, &amp;strucBlob)) </span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="stringliteral">  cout &lt;&lt; &quot;Image File Not Found&quot; &lt;&lt; endl;</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="stringliteral">  exit(0);</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="stringliteral">} </span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="stringliteral">This particular section, makes sure that the image is converted to datum format, more details on [datum](https://github.com/BVLC/caffe/wiki/The-Datum-Object)</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="stringliteral">Next,</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="stringliteral">Blob&lt;float&gt;* dataBlob = new Blob&lt;float&gt;(1, strucBlob.channels(), strucBlob.height(), strucBlob.width());</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="stringliteral">Herein, a new blob, [link to understand blob](http://caffe.berkeleyvision.org/tutorial/net_layer_blob.html), is created. This is the blob which will hold the input image in format reuired by caffe.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="stringliteral">Now,</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="stringliteral">protoBlob.set_num(1);</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="stringliteral">protoBlob.set_channels(strucBlob.channels());</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="stringliteral">protoBlob.set_height(strucBlob.height());</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="stringliteral">protoBlob.set_width(strucBlob.width());</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="stringliteral">const int data_size = strucBlob.channels() * strucBlob.height() * strucBlob.width();</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="stringliteral">int sizeStrucBlob = std::max&lt;int&gt;(strucBlob.data().size(), strucBlob.float_data_size());</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="stringliteral">for (int i = 0; i &lt; sizeStrucBlob; ++i) </span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="stringliteral">  protoBlob.add_data(0.);</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="stringliteral">const string&amp; data = strucBlob.data();</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="stringliteral">if (data.size() != 0) </span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="stringliteral">  for (int i = 0; i &lt; sizeStrucBlob; ++i)</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="stringliteral">    protoBlob.set_data(i, protoBlob.data(i) + (uint8_t)data[i]);</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="stringliteral">dataBlob-&gt;FromProto(protoBlob);</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="stringliteral">inputBlob.push_back(dataBlob);</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="stringliteral">In this last section, the temporary structure, protoBlob, takes input image and converts into the reuired format with assigned dimensions, which is forwaded to dataBlob and in turn, finally, pushed into inputBlob structure vector.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="stringliteral">**Function 8**</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="stringliteral">This is the function which takes the inputBlob, invokes a caffe network and pushes the inputBlob into the caffe network for classification.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral">Caffe::set_mode(Caffe::CPU);</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="stringliteral">This particular part sets mode as cpu mode, which was later changed by keeping it as a option. In later commits somewhere, it was modified in a way that when gpu is detected use gpu mode.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="stringliteral">Net&lt;float&gt;  net(networkFileLocation, TEST);</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="stringliteral">net.CopyTrainedLayersFrom(weightModelFileLoaction); </span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="stringliteral">The first line creates the network, and the nest loads the trained weights into it.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="stringliteral">const vector&lt;Blob&lt;float&gt;*&gt;&amp; result =  net.Forward(inputBlob, &amp;type);</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="stringliteral">This particular line is what makes the network compute the result. A set of predictions for each class, in case of mnist 10 classes, is obtained. The one with highest probability is what the classifier states as the most propable class of the object in the image. This is obtained using the following section of code</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="stringliteral">float max = 0;</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="stringliteral">float max_i = 0;</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="stringliteral">for (int i = 0; i &lt; 10; ++i)</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="stringliteral">  float value = result[0]-&gt;cpu_data()[i];</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="stringliteral">  if (max &lt; value)</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="stringliteral">  max = value;</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="stringliteral">  max_i = i;</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="stringliteral">cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; &quot;****** OUTPUT *******&quot; &lt;&lt; endl;</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="stringliteral">cout &lt;&lt; &quot;classified image is digit &quot; &lt;&lt; max_i &lt;&lt; endl &lt;&lt; endl;</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="stringliteral">This ends the base file additions for this commit</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="stringliteral">2.2.3) Mnist Classification Example {#commit2_second_change_3}</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="stringliteral">An example which takes use of the functions stated above in this commit is included, examples/objectdetector/od_cnn_mnist_classification.cpp.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="stringliteral">It takes data from folder examples/objectdetector/Mnist_Classify. This folder has a network file, a trained weight file, and 5 test images.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="stringliteral">The cpp file has the following components,</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="stringliteral">#include &quot;detectors/global2D/detection/ODConvClassification.h&quot;</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="stringliteral">#include &quot;common/utils/ODFrameGenerator.h&quot;</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="stringliteral">#include &quot;common/pipeline/ObjectDetector.h&quot;</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="stringliteral">#include &quot;common/pipeline/ODDetection.h&quot;</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="stringliteral">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="stringliteral">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="stringliteral">These are the libraries included in the code, of which the first one is the most important one.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="stringliteral">The rest of the code is explained in the comments(inside code) below</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="stringliteral">od::g2d::ODConvClassification *mnist_classifier = new od::g2d::ODConvClassification(&quot;&quot;);  //Create object of class ODConvClassification</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="stringliteral">mnist_classifier-&gt;setWeightModelFileLocation(argv[1]);            //Set location for trained wieghts file</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="stringliteral">mnist_classifier-&gt;setNetworkModelFileLocation(argv[2]);           //Set location for nework structure file </span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="stringliteral">mnist_classifier-&gt;setImageFileLocation(argv[3]);            //Set location for test image file</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="stringliteral">mnist_classifier-&gt;setTestBlob(1,28,28);               //Convert image to caffe required format and dimensions 28,28 and grayscale input</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="stringliteral">mnist_classifier-&gt;classify();                 //Invoke the classifier</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="stringliteral">This code has a help function,</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="stringliteral">void help()</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="stringliteral">  cout &lt;&lt; endl &lt;&lt; &quot;Usage: ./examples/objectdetector/od_cnn_mnist_classification &lt;path to weight caffemodel file&gt; &lt;path to network file&gt; &lt;path to image file&gt;&quot; &lt;&lt; endl;</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="stringliteral">  cout &lt;&lt; endl &lt;&lt; &quot;Example: ./examples/objectdetector/od_cnn_mnist_classification ../examples/objectdetector/Mnist_Classify/mnist.caffemodel ../examples/objectdetector/Mnist_Classify/lenet.prototxt ../examples/objectdetector/Mnist_Classify/3.png&quot; &lt;&lt; endl &lt;&lt; endl;</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="stringliteral">  exit(0);</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="stringliteral">This is for the cases when user puts in wrong command to invoke the classifier.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="stringliteral">Example: Mentioned is classification of </span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="stringliteral">@image html 3.png</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="stringliteral">with the function</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="stringliteral">\code{.sh}</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="stringliteral">./examples/objectdetector/od_cnn_mnist_classification ../examples/objectdetector/Mnist_Classify/mnist.caffemodel ../examples/objectdetector/Mnist_Classify/lenet.prototxt ../examples/objectdetector/Mnist_Classify/3.png</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="stringliteral">and the result is shown in the terminal in the image below as</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="stringliteral">&quot;****** OUTPUT *******</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="stringliteral">classified image is digit 4&quot;</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="stringliteral">@image html Example_For_Documentation.png </span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="stringliteral">Happy Coding!!!</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="stringliteral">2.2.4) Adding cnn based classifier: Features and benefits  {#commit2_second_change_4}</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="stringliteral">**1)Usually the caffe is invoked using a python wrapper, this is the first time any open source library will be having a c++ based classifier**</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="stringliteral">**2)It makes use of the caffe data convertor in c++ format, so that opendetection user may load image in either opencv Mat format or just point to image&#39;</span>s location**</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;**3)User just needs to point a network file, trained weights and a test <a class="code" href="classimage.html">image</a>, and the classification result can be obtained <span class="keyword">using</span> the mentioned examples**</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;2.3)Adding cnn based trainer, commit 2.3 {#commit2_third_change}</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;---</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;Here, the goal was to add a cnn based trainer, based on caffe library, to the opendetection source. The [fragmented commit: Commit <span class="keywordflow">for</span> Mnist Training Example Using Caffe Library](https:<span class="comment">//github.com/abhi-kumar/opendetection/commit/1adb044f5bc10b3a29d190273d86527e0e4d1f53), involved additions of 3 code source files and 42000 training images (Mnist Dataset), a link file to these images with labels, a training etwork file and a solver file.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;2.3.1)Training Base Class {#commit2_third_change_1}</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;---</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;At <span class="keyword">this</span> stage, two files were introduced, detectors/global2D/training/ODConvTrainer.cpp and detectors/global2D/training/ODConvTrainer.h</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;In the header file,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;\code{.h}</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#include &quot;common/pipeline/ODTrainer.h&quot;</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">#include &quot;common/utils/utils.h&quot;</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;\endcode</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;these headers were used to make sure that the training <span class="keyword">class </span>ODConvTrainer is derived from public elements of ODTrainer.</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;Opencv library</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;\code{.h}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#include &lt;opencv2/opencv.hpp&gt;</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;\endcode</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;is added to make sure that image loading and saving is done <span class="keyword">using</span> the Mat constructor</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;A set of general c++ header are also added</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;\code{.h}</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;\endcode</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;Three header files from caffe library are added in order to make sure that caffe library can be succesfully included. </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;\code{.h}</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="preprocessor">#include &quot;caffe/caffe.hpp&quot;</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">#include &quot;caffe/util/io.hpp&quot;</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">#include &quot;caffe/blob.hpp&quot;</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">#include &quot;caffe/solver.hpp&quot;</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">#include &quot;caffe/sgd_solvers.hpp&quot;</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;\endcode</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;Tha last two files have been used to invoke the solver properties and run the trainer from caffe library.</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;At <span class="keyword">this</span> stage the <span class="keyword">class </span>had only one variable</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="keywordtype">string</span> solverLocation;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;\endcode which stores the location pointing towards the solver file.</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;**Function1**</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="keywordtype">void</span> ODConvTrainer::setSolverLocation(<span class="keywordtype">string</span> location)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  ODConvTrainer::solverLocation = location; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;\endcode</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;Sets the variable solverLocation.</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;**Function2**</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="keywordtype">void</span> ODConvTrainer::startTraining()</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  Caffe::set_mode(Caffe::CPU);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  SGDSolver&lt;float&gt; s(solverLocation);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  s.Solve();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;\endcode</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="keyword">this</span> <span class="keyword">function</span> is the sole of <span class="keyword">this</span> simple trainer. The first line sets the mode, in later commits mode is decided on the basis of the system specifications and user commands. The next line creates a caffe solver, [link to understand solver](http:<span class="comment">//caffe.berkeleyvision.org/tutorial/solver.html) and the last line starts the training.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;2.3.2)Mnist Training Example{#commit2_third_change_2}</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;---</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;The file added <span class="keywordflow">for</span> <span class="keyword">this</span> is: examples/objectdetector/od_cnn_train_mnist_simple.cpp

\code{.cpp}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<a class="code" href="classod_1_1g2d_1_1_o_d_conv_trainer.html">od::g2d::ODConvTrainer</a> *mnist_trainer = <span class="keyword">new</span> <a class="code" href="classod_1_1g2d_1_1_o_d_conv_trainer.html">od::g2d::ODConvTrainer</a>(<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;mnist_trainer-&gt;<a class="code" href="classod_1_1g2d_1_1_o_d_conv_trainer.html#a3c46e781fb546a23279ab29fbd23a77e">setSolverLocation</a>(argv[1]);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;mnist_trainer-&gt;<a class="code" href="classod_1_1g2d_1_1_o_d_conv_trainer.html#af1f228bf3c1e80be799768f85fb95ad1">startTraining</a>();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;\endcode</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;The above code is <span class="keyword">self</span> explanatory. The trained weights are saved into a location as stated in the solver file.</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;2.4)Introducing a custom solver, commit 2.4 {#commit2_fourth_change}</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;---</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;This commit, [fragmented commit: Commit <span class="keywordflow">for</span> Mnist Training Example Using Caffe Library With Customized Solver](https:<span class="comment">//github.com/abhi-kumar/opendetection/commit/6777c6cdc39289d4abe443d4cc564fb25135148b), to enable the user to create a solver file, as required in caffe library format, so that user may make the file using a graphical user interface rather than writing the entire text.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;This particular commit had changes added or additions made to 9 files. The most crucial one was to add gtkmm library files to the source. GTKMM, [link to understand gtkmm](http:<span class="comment">//www.gtkmm.org/en/), is a library for involvement of gui based applications. We decided to move with GUI inclusion because, to make user handle solver file in an effective way, a set of 19 parameters had to be handled. If it were upto the c++ arguments to facilitate these 19 parameters, the outcome would have been a very cumbersome application. Also, not all parameters were to be added to the solver always, so a GUI appeared to be the most feasible option from the user&#39;s end. </span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;To install gtkmm use the following command,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;\code{.sh}</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;sudo apt-<span class="keyword">get</span> install libglib2.0-dev libatk1.0* libpango1.0-dev libcairo2-dev gdk-pixbuf2.0-0 libsigc++-2.0-dev libgtk-3-dev libcairomm-1.0-dev libpangomm-1.4-dev libatkmm-1.6-dev libgtkmm-3.0-dev</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;\endcode</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;2.4.1)How the GTKMM library was introduced {#commit2_fourth_change_1}</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;---</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;This involved making changes to the cmake/od_mandatory_dependency.cmake file.</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;This,</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;\code{.cmake}</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;set(GTKMM_INCLUDE_DIRS_3 -pthread /usr/include/gtkmm-3.0 /usr/lib/x86_64-linux-gnu/gtkmm-3.0/include /usr/include/atkmm-1.6 /usr/include/giomm-2.4 /usr/lib/x86_64-linux-gnu/giomm-2.4/include /usr/include/pangomm-1.4 /usr/lib/x86_64-linux-gnu/pangomm-1.4/include /usr/include/gtk-3.0 /usr/include/cairomm-1.0 /usr/lib/x86_64-linux-gnu/cairomm-1.0/include /usr/include/gdk-pixbuf-2.0 /usr/include/gtk-3.0/unix-print /usr/include/gdkmm-3.0 /usr/lib/x86_64-linux-gnu/gdkmm-3.0/include /usr/include/atk-1.0 /usr/include/glibmm-2.4 /usr/lib/x86_64-linux-gnu/glibmm-2.4/include /usr/include/glib-2.0 /usr/lib/x86_64-linux-gnu/glib-2.0/include /usr/include/sigc++-2.0 /usr/lib/x86_64-linux-gnu/sigc++-2.0/include /usr/include/pango-1.0 /usr/include/cairo /usr/include/pixman-1 /usr/include/freetype2 /usr/include/libpng12 /usr/include/at-spi2-atk/2.0 /usr/include/gio-unix-2.0/ /usr/include/harfbuzz)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;\endcode</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;created a link to the header files involved with GTKMM</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;and,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;\code{.cmake}</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;set(GTKMM_LIBRARIES_3 gtkmm-3.0 atkmm-1.6 gdkmm-3.0 giomm-2.4 pangomm-1.4 gtk-3 glibmm-2.4 cairomm-1.0 gdk-3 atk-1.0 gio-2.0 pangocairo-1.0 gdk_pixbuf-2.0 cairo-gobject pango-1.0 cairo sigc-2.0 gobject-2.0 glib-2.0)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;\endcode</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;created a link to the .so library files required <span class="keywordflow">for</span> proper compilation. These two variables where used whenever reuired in other cmakelists files.</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;2.4.2) Custom Solver base <span class="keyword">class </span>and usage details for every parameter/entry in the gui{#commit2_fourth_change_2}</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;---</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;The base <span class="keyword">class </span>named, <a class="code" href="class_solver_properties.html">SolverProperties</a>, was introduced using two files,  detectors/global2D/training/solver.cpp and  detectors/global2D/training/solver.h. </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;The header file takes in the following headers from gtkmm library</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">#include &lt;gtkmm/grid.h&gt;</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="preprocessor">#include &lt;gtkmm/entry.h&gt;</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor">#include &lt;gtkmm/button.h&gt;</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="preprocessor">#include &lt;gtkmm/radiobutton.h&gt;</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="preprocessor">#include &lt;gtkmm/messagedialog.h&gt;</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="preprocessor">#include &lt;gtkmm/window.h&gt;</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor">#include &lt;gtkmm/scrolledwindow.h&gt;</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;\endcode</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  - grid.h to make sure the elements, eg., buttons, display windows, text boxes etc, lie on a particular place even with differential resolutions of user<span class="stringliteral">&#39;s systems</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="stringliteral">  - entry.h for textboxes</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="stringliteral">  - button.h for buttons</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="stringliteral">  - radiobutton.h for radio type buttons</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="stringliteral">  - messagedialog.h for invoking warning or user oriented messages on completion of events</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="stringliteral">  - window.h as the base class to invoke a window based application</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="stringliteral">  - scrollwindow.h to make sure that the window created can be scrolled either ways.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="stringliteral">The gui has a total of</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="stringliteral">  - 23 buttons</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="stringliteral">  - 19 text box entries</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="stringliteral">  - 17 labels</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="stringliteral">  - 28 radio buttons grouped into 9 groups</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="stringliteral">  - 21 string (here ustring) variables</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="stringliteral">**Initializing the elements, i.e., the buttons, text boxes, labels, and radio buttons**</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="stringliteral">In the cpp file, these are initialized accroding to the following rules</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="stringliteral">  - Like any object initalization, these are done just after the mentioning the constructor and before writing the matter of the constructor.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="stringliteral">  - for button, nameOfButton(&quot;Text to print on the button&quot;)</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="stringliteral">  - for text boxes, nameOfTextBox()</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="stringliteral">  - for labels, nameOfLabel(&quot;&quot;)</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="stringliteral">  - for radioButton, nameOfButton(&quot;Text to print on the button&quot;)</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="stringliteral">and it is done as shown below</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="stringliteral">SolverProperties::SolverProperties(): </span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="stringliteral">  label_solverFileName(&quot;&quot;),</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="stringliteral">  button_solverFileName(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="stringliteral">  text_solverFileName(),</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="stringliteral">  label_trainNetworkFileType(&quot;&quot;),</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="stringliteral">  rbutton_trainNetworkFileType_net(&quot;net&quot;), rbutton_trainNetworkFileType_tt(&quot;train_net&quot;),</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="stringliteral">  label_trainNetworkFileName(&quot;&quot;),</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="stringliteral">  button_trainNetworkFileName(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="stringliteral">  text_trainNetworkFileName(),</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="stringliteral">  label_enableTestNet(&quot;&quot;),</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="stringliteral">  rbutton_enableTestNet_no(&quot;No&quot;), rbutton_enableTestNet_yes(&quot;Yes&quot;),</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="stringliteral">  label_testNetworkFileName(&quot;&quot;),</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="stringliteral">  button_testNetworkFileName(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="stringliteral">  text_testNetworkFileName(),</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="stringliteral">  label_enableValidationParameters(&quot;&quot;),</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="stringliteral">  rbutton_enableValidationParameters_no(&quot;No&quot;), rbutton_enableValidationParameters_yes(&quot;Yes&quot;),</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="stringliteral">  label_testIter(&quot;&quot;),</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="stringliteral">  button_testIter(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="stringliteral">  text_testIter(),</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="stringliteral">  label_testInterval(&quot;&quot;),</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="stringliteral">  button_testInterval(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="stringliteral">  text_testInterval(),</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="stringliteral">  label_enableAverageLoss(&quot;&quot;),</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="stringliteral">  rbutton_enableAverageLoss_no(&quot;No&quot;), rbutton_enableAverageLoss_yes(&quot;Yes&quot;),</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="stringliteral">  label_averageLoss(&quot;&quot;),</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="stringliteral">  button_averageLoss(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="stringliteral">  text_averageLoss(),</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="stringliteral">  label_enableRandomSample(&quot;&quot;),</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="stringliteral">  rbutton_enableRandomSample_no(&quot;No&quot;), rbutton_enableRandomSample_yes(&quot;Yes&quot;),</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="stringliteral">  label_randomSample(&quot;&quot;),</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="stringliteral">  button_randomSample(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="stringliteral">  text_randomSample(),</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="stringliteral">  label_display(&quot;&quot;),</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="stringliteral">  button_display(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="stringliteral">  text_display(),</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="stringliteral">  label_enableDebugInfo(&quot;&quot;),</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="stringliteral">  rbutton_enableDebugInfo_no(&quot;No&quot;), rbutton_enableDebugInfo_yes(&quot;Yes&quot;),</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="stringliteral">  button_debugInfo(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="stringliteral">  label_snapshot(&quot;&quot;),</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="stringliteral">  button_snapshot(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="stringliteral">  text_snapshot(),</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="stringliteral">  label_enableTestComputeLoss(&quot;&quot;),</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="stringliteral">  rbutton_enableTestComputeLoss_no(&quot;No&quot;), rbutton_enableTestComputeLoss_yes(&quot;Yes&quot;),</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="stringliteral">  button_testComputeLoss(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="stringliteral">  label_snapshotPrefix(&quot;&quot;),</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="stringliteral">  button_snapshotPrefix(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="stringliteral">  text_snapshotPrefix(),</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="stringliteral">  label_maxIter(&quot;&quot;),</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="stringliteral">  button_maxIter(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="stringliteral">  text_maxIter(),</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="stringliteral">  label_type(&quot;&quot;),</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="stringliteral">  button_type(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="stringliteral">  rbutton_typeSGD_yes(&quot;SGD&quot;), rbutton_typeAdadelta_yes(&quot;AdaDelta&quot;), rbutton_typeAdagrad_yes(&quot;AdaGrad&quot;), rbutton_typeAdam_yes(&quot;Adam&quot;),</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="stringliteral">  rbutton_typeRMSProp_yes(&quot;RMSProp&quot;), rbutton_typeNesterov_yes(&quot;Nesterov&quot;),</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="stringliteral">  label_learningRatePolicy(&quot;&quot;),</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="stringliteral">  button_learningRatePolicy(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="stringliteral">  rbutton_learningRatePolicyFixed_yes(&quot;fixed&quot;), rbutton_learningRatePolicyExp_yes(&quot;exp&quot;), rbutton_learningRatePolicyStep_yes(&quot;step&quot;),</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="stringliteral">  rbutton_learningRatePolicyInv_yes(&quot;inv&quot;), rbutton_learningRatePolicyMultistep_yes(&quot;multistep&quot;), </span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="stringliteral">  rbutton_learningRatePolicyPoly_yes(&quot;poly&quot;), rbutton_learningRatePolicySigmoid_yes(&quot;sigmoid&quot;),</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="stringliteral">  label_baseLearningRate(&quot;&quot;),</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="stringliteral">  button_baseLearningRate(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="stringliteral">  text_baseLearningRate(),</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="stringliteral">  label_gamma(&quot;&quot;),</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="stringliteral">  button_gamma(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="stringliteral">  text_gamma(),</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="stringliteral">  label_power(&quot;&quot;),</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="stringliteral">  button_power(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="stringliteral">  text_power(),</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="stringliteral">  label_stepSize(&quot;&quot;),</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="stringliteral">  button_stepSize(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="stringliteral">  text_stepSize(),</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="stringliteral">  label_stepSizeValue(&quot;&quot;),</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="stringliteral">  button_stepSizeValue(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="stringliteral">  text_stepSizeValue(),</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="stringliteral">  label_weightDecay(&quot;&quot;),</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="stringliteral">  button_weightDecay(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="stringliteral">  text_weightDecay(),</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="stringliteral">  label_momentum(&quot;&quot;),</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="stringliteral">  button_momentum(&quot;Update&quot;),</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="stringliteral">  text_momentum(),</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="stringliteral">  button_saveFile(&quot;Save File&quot;)</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="stringliteral">  //Constructor code starts from here</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="stringliteral">**Invoking the Grid**</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="stringliteral">The grids for putting the elemets was invoked using the following code snippet</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="stringliteral">set_title(&quot;Solver&quot;);</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="stringliteral">set_border_width(10);</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="stringliteral">add(m_sw1);</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="stringliteral">m_grid1.set_column_spacing (10);</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="stringliteral">m_grid1.set_row_spacing (50);</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="stringliteral">  - The fist line sets the title for the window</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="stringliteral">  - Border width is added in second line to make sure that no element is hidden over boundaries</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="stringliteral">  - Line 4 and 5 set the spacing between the elements</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="stringliteral">  - line 3 adds m_sw1, this m_sw1 is nothing but a scrollwindow</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="stringliteral">This scroll window is added to the window. This scroll window takes the grid, m_grid1 into the scrollwindow at the end of the constructor as</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="stringliteral">m_sw1.add(m_grid1);</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="stringliteral">m_sw1.set_policy(Gtk::POLICY_AUTOMATIC, Gtk::POLICY_AUTOMATIC);</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="stringliteral">//  m_grid1.show();</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="stringliteral">show_all_children();</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="stringliteral">m_sw1.show();</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="stringliteral">where, all the children of the grid are shown with the end line causing the scrolls to show up.</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="stringliteral">**Example Entry1: Name and location of the file to be created**</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="stringliteral">This entry asks user to give a proper name, with relative location( from build folder), of the solver file to be saved. This entry looks like the one mentioned in the red colored box in the image below:</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="stringliteral">@image html solver_1.png</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="stringliteral">This involves a label </span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="stringliteral">label_solverFileName.set_text(&quot;1) Give a proper name to the solver file: &quot;);  //set label text</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="stringliteral">label_solverFileName.set_line_wrap();           </span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="stringliteral">label_solverFileName.set_justify(Gtk::JUSTIFY_FILL);</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="stringliteral">m_grid1.attach(label_solverFileName,0,0,2,1);         //set position of the element into the grid</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="stringliteral">label_solverFileName.show();</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="stringliteral">followed by a text entry, this entry has an initial text &quot;../examples/objectdetector/Mnist_Train/solverCustom1.prototxt&quot;. The folder Mnist_Train is already created in the source, hence, as a sample a pointer to the location, the text there points to the folder. solverCustom1.prototxt is the name of the file that will be created.</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="stringliteral">text_solverFileName.set_max_length(100);              //set max length of the text</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="stringliteral">text_solverFileName.set_text(&quot;../examples/objectdetector/Mnist_Train/solverCustom1.prototxt&quot;);  //set initial text</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="stringliteral">text_solverFileName.select_region(0, text_solverFileName.get_text_length());    </span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="stringliteral">m_grid1.attach(text_solverFileName,2,0,5,1);              //set position of the element into the grid</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="stringliteral">text_solverFileName.show();</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="stringliteral">This is later followed by a button, to update the output file location and name. Once the location and name are updated in the text box, the button needs to be pressed. After pressing the button a messagebox appears stating the outcome. How the button works is stated in the section 2.4.3. </span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="stringliteral">button_solverFileName.signal_clicked().connect(sigc::bind&lt;Glib::ustring&gt;(</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="stringliteral">             sigc::mem_fun(*this, &amp;SolverProperties::on_button_clicked), &quot;solverFileName&quot;));  //link the button to a function with a key, here the key is &quot;solverFileName&quot;</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="stringliteral">m_grid1.attach(button_solverFileName,7,0,1,1);</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="stringliteral">button_solverFileName.show();</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="stringliteral">**Entry2: Type of network link**</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="stringliteral">There exsists two types of links</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="stringliteral">  - net: this is to be selected when training and validation details are put into a same prototxt file</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="stringliteral">  - train_net: this is to be selected when the training parameters and validation parameters are put into two different prototxt files</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="stringliteral">It can be seen in the red rectangular section box in the image below</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="stringliteral">@image html solver_2.png</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="stringliteral">This entry has two elements, first is the label,</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="stringliteral">label_trainNetworkFileType.set_text(&quot;2)Select type of training network file type.\nUsually trese exists two types,\nfirst adds validation and training in the same file,\nWhile other adds them in two different files&quot;);</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="stringliteral">label_trainNetworkFileType.set_line_wrap();</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="stringliteral">label_trainNetworkFileType.set_justify(Gtk::JUSTIFY_FILL);</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="stringliteral">m_grid1.attach(label_trainNetworkFileType,0,1,2,1);</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="stringliteral">label_trainNetworkFileType.show();</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="stringliteral">and a set of two radio buttons to select the two types of links</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="stringliteral">Gtk::RadioButton::Group group = rbutton_trainNetworkFileType_net.get_group();   //set a group</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="stringliteral">rbutton_trainNetworkFileType_tt.set_group(group);         // add other buttons to this group</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="stringliteral">rbutton_trainNetworkFileType_net.set_active();            //set one of them as active</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="stringliteral">m_grid1.attach(rbutton_trainNetworkFileType_net,2,1,1,1);</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="stringliteral">rbutton_trainNetworkFileType_net.show();</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="stringliteral">m_grid1.attach(rbutton_trainNetworkFileType_tt,3,1,1,1);</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="stringliteral">rbutton_trainNetworkFileType_tt.show();</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="stringliteral">**Example Entry 2.1: Add the location of the network file**</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="stringliteral">This entry asks user to give a proper name, with relative location( from build folder), of the network/training cnn architecture file on which training has to be done. This entry looks like the one mentioned in the red colored box in the image below:</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="stringliteral">@image html solver_3.png</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="stringliteral">It has three fields</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="stringliteral">a label,</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="stringliteral">label_trainNetworkFileName.set_text(&quot;2.1) net: or train_net:\n(Parameter Details: Give location of \nthe net file or the train_net file) &quot;);</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="stringliteral">label_trainNetworkFileName.set_line_wrap();</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="stringliteral">label_trainNetworkFileName.set_justify(Gtk::JUSTIFY_FILL);</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="stringliteral">m_grid1.attach(label_trainNetworkFileName,0,2,2,1);</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="stringliteral">label_trainNetworkFileName.show();</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="stringliteral">a text entry element,</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="stringliteral">\code{.cpp} </span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="stringliteral">text_trainNetworkFileName.set_max_length(500);</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="stringliteral">text_trainNetworkFileName.set_text(&quot;../examples/objectdetector/Mnist_Train/train1.prototxt&quot;);</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="stringliteral">text_trainNetworkFileName.select_region(0, text_solverFileName.get_text_length());</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="stringliteral">m_grid1.attach(text_trainNetworkFileName,2,2,5,1);  </span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="stringliteral">text_trainNetworkFileName.show(); </span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="stringliteral">and an update button to update the text added/removed/changed in the the text box next to it. After pressing the button a messagebox appears stating the outcome. How the button works is stated in the section 2.4.3. </span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="stringliteral">button_trainNetworkFileName.signal_clicked().connect(sigc::bind&lt;Glib::ustring&gt;(</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="stringliteral">              sigc::mem_fun(*this, &amp;SolverProperties::on_button_clicked), &quot;trainNetworkFileName&quot;)); ////link the button to a function with a key, here the key is &quot;trainNetworkFileName&quot;</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="stringliteral">m_grid1.attach(button_trainNetworkFileName,7,2,1,1);</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="stringliteral">button_trainNetworkFileName.show();</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="stringliteral">**Example Entry 3: Selecting to whether add a test net file separately, and if yes pointing location of the file**</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="stringliteral">This entry is for the purpose when, a separate test/validation net is to be added. It is observed in the solver gui as in the red box stated in the image below</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="stringliteral">@image html solver_4.png</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="stringliteral">It has five elements, two labels, one text file, one radio button group and a final button to update the location</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="stringliteral">label_enableTestNet.set_text(&quot;3) Enable Test Network Parameter:\n(Enable only with using \&quot;train_net\&quot; parameter.)&quot;);</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="stringliteral">label_enableTestNet.set_line_wrap();</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="stringliteral">label_enableTestNet.set_justify(Gtk::JUSTIFY_FILL);</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="stringliteral">m_grid1.attach(label_enableTestNet,0,3,2,1);</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="stringliteral">label_enableTestNet.show();</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="stringliteral">Gtk::RadioButton::Group group2 = rbutton_enableTestNet_no.get_group();</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="stringliteral">rbutton_enableTestNet_yes.set_group(group2);</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="stringliteral">rbutton_enableTestNet_no.set_active();</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="stringliteral">m_grid1.attach(rbutton_enableTestNet_no,2,3,1,1);</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="stringliteral">rbutton_enableTestNet_no.show();</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="stringliteral">m_grid1.attach(rbutton_enableTestNet_yes,3,3,1,1);</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="stringliteral">rbutton_enableTestNet_yes.show();</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="stringliteral">label_testNetworkFileName.set_text(&quot;3.1) test_net:&quot;);</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="stringliteral">label_testNetworkFileName.set_line_wrap();</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="stringliteral">label_testNetworkFileName.set_justify(Gtk::JUSTIFY_FILL);</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="stringliteral">m_grid1.attach(label_testNetworkFileName,4,3,1,1);</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="stringliteral">label_testNetworkFileName.show();</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="stringliteral">text_testNetworkFileName.set_max_length(500);</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="stringliteral">text_testNetworkFileName.set_text(&quot;../examples/objectdetector/Mnist_Train/test1.prototxt&quot;);</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="stringliteral">text_testNetworkFileName.select_region(0, text_testNetworkFileName.get_text_length());</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="stringliteral">m_grid1.attach(text_testNetworkFileName,5,3,3,1); </span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="stringliteral">text_testNetworkFileName.show();  </span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="stringliteral">button_testNetworkFileName.signal_clicked().connect(sigc::bind&lt;Glib::ustring&gt;(</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="stringliteral">              sigc::mem_fun(*this, &amp;SolverProperties::on_button_clicked), &quot;testNetworkFileName&quot;));</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="stringliteral">m_grid1.attach(button_testNetworkFileName,8,3,1,1);</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="stringliteral">button_testNetworkFileName.show();</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="stringliteral">**Thus the rest of the entries are planned and coded. Whenever a parameter is set to be enabled as &quot;no&quot;, its presense is commented in the output text file**</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="stringliteral">2.4.3)Pressing the buttons in the solver creator{#commit2_fourth_change_3}</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="stringliteral">**Example when a file name or parameter has to be saved**</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="stringliteral">When &quot;Update&quot;, next to filename textbox, is pressed the following happens,</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="stringliteral">solverFileName = text_solverFileName.get_text();</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="stringliteral">std::cout &lt;&lt; &quot;Solver File Name set as: &quot; &lt;&lt; solverFileName &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="stringliteral">Gtk::MessageDialog dialog(*this, &quot;FileName Updated&quot;);</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="stringliteral">    dialog.set_secondary_text(&quot;New name and location: &quot; + solverFileName);</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="stringliteral">dialog.run();</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="stringliteral">The first line, saves the name into a string variable and the next lines prompt the user about the update</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="stringliteral">**Example when the entire file is saved**</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="stringliteral">When &quot;Save File&quot; button is pressed, a string is created in the format required by caffe solver file. All elements which are enabled are uncommented and the rest are set as commented. This string is pushed into a text file as mentioned by the user.</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="stringliteral">The code which does this is shown below,</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="stringliteral">if(rbutton_enableTestNet_yes.get_active() == 1 and rbutton_trainNetworkFileType_net.get_active() == 1)</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="stringliteral">  Gtk::MessageDialog dialog(*this, &quot;\&quot;test_net\&quot; parameter not required&quot;);</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="stringliteral">  dialog.set_secondary_text(&quot;\&quot;test_net\&quot; parameter is only required when \&quot;train_net\&quot; parameter is specified&quot;);</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="stringliteral">  dialog.run();</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="stringliteral">else if(rbutton_enableTestNet_yes.get_active() == 1 and rbutton_enableValidationParameters_no.get_active() == 1)</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="stringliteral">  Gtk::MessageDialog dialog(*this, &quot;Validation parameters required&quot;);</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="stringliteral">  dialog.set_secondary_text(&quot;Validation parameters are required when \&quot;test_net\&quot; parameter is specified.&quot;);</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="stringliteral">  dialog.run();</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="stringliteral">else</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="stringliteral">  solverFileName = text_solverFileName.get_text();</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="stringliteral">  trainNetworkFileName = text_trainNetworkFileName.get_text();</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="stringliteral">  testNetworkFileName = text_testNetworkFileName.get_text();</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="stringliteral">  testIter = text_testIter.get_text();</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="stringliteral">  testInterval = text_testInterval.get_text();</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="stringliteral">  averageLoss = text_averageLoss.get_text();</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="stringliteral">  randomSample = text_randomSample.get_text();</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="stringliteral">  display = text_display.get_text();</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="stringliteral">  snapshot = text_snapshot.get_text();</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="stringliteral">  snapshotPrefix = text_snapshotPrefix.get_text();</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="stringliteral">  maxIter = text_maxIter.get_text();</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="stringliteral">  baseLearningRate = text_baseLearningRate.get_text();</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="stringliteral">  gamma = text_gamma.get_text();</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="stringliteral">  power = text_power.get_text();</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="stringliteral">  stepSize = text_stepSize.get_text();</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="stringliteral">  stepSizeValue = text_stepSizeValue.get_text();</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="stringliteral">  weightDecay = text_weightDecay.get_text();</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="stringliteral">  momentum = text_momentum.get_text();</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="stringliteral">  if(rbutton_enableDebugInfo_yes.get_active())</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="stringliteral">    debugInfo = &quot;1&quot;;</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="stringliteral">  else if(rbutton_enableDebugInfo_no.get_active())</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="stringliteral">    debugInfo = &quot;0&quot;;</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="stringliteral">  if(rbutton_enableTestComputeLoss_yes.get_active())</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="stringliteral">    testComputeLoss = &quot;1&quot;;</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="stringliteral">  else if(rbutton_enableTestComputeLoss_no.get_active())</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="stringliteral">    testComputeLoss = &quot;0&quot;;</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="stringliteral">  if(rbutton_typeSGD_yes.get_active())</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="stringliteral">    type = &quot;1&quot;;</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="stringliteral">  else if(rbutton_typeAdadelta_yes.get_active())</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="stringliteral">    type = &quot;AdaDelta&quot;;</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="stringliteral">  else if(rbutton_typeAdagrad_yes.get_active())</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="stringliteral">    type = &quot;AdaGrad&quot;;</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="stringliteral">  else if(rbutton_typeAdam_yes.get_active())</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="stringliteral">    type = &quot;Adam&quot;;</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="stringliteral">  else if(rbutton_typeRMSProp_yes.get_active())</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="stringliteral">    type = &quot;RMSProp&quot;;</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="stringliteral">  else if(rbutton_typeNesterov_yes.get_active())</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="stringliteral">    type = &quot;Nesterov&quot;;</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="stringliteral">  if(rbutton_learningRatePolicyFixed_yes.get_active())</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="stringliteral">    learningRatePolicy = &quot;fixed&quot;;</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="stringliteral">  else if(rbutton_learningRatePolicyExp_yes.get_active())</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="stringliteral">    learningRatePolicy = &quot;exp&quot;;</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="stringliteral">  else if(rbutton_learningRatePolicyStep_yes.get_active())</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="stringliteral">    learningRatePolicy = &quot;step&quot;;</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="stringliteral">  else if(rbutton_learningRatePolicyInv_yes.get_active())</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="stringliteral">    learningRatePolicy = &quot;inv&quot;;</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="stringliteral">  else if(rbutton_learningRatePolicyMultistep_yes.get_active())</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="stringliteral">    learningRatePolicy = &quot;multistep&quot;;</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="stringliteral">  else if(rbutton_learningRatePolicyPoly_yes.get_active())</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="stringliteral">    learningRatePolicy = &quot;poly&quot;;</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="stringliteral">  else if(rbutton_learningRatePolicySigmoid_yes.get_active())</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="stringliteral">    learningRatePolicy = &quot;sigmoid&quot;;</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="stringliteral">  std::ofstream myfile;</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="stringliteral">  myfile.open(solverFileName);</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;#File generated using OpenDetection&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="stringliteral">  myfile.close();</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="stringliteral">  myfile.open(solverFileName);</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="stringliteral">  if(!myfile)</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="stringliteral">    Gtk::MessageDialog dialog(*this, &quot;File Could not be Created&quot;);</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="stringliteral">    dialog.set_secondary_text(&quot;Make sure the destination exists or the file is writable&quot;);</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="stringliteral">    dialog.run();</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="stringliteral">  std::cout &lt;&lt; &quot;Solver File Name saved as: &quot; &lt;&lt; solverFileName &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="stringliteral">  if(rbutton_trainNetworkFileType_net.get_active() == 1)</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;net: &quot; &lt;&lt; &quot;\&quot;&quot; &lt;&lt; trainNetworkFileName &lt;&lt; &quot;\&quot;&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="stringliteral">  else if(rbutton_trainNetworkFileType_tt.get_active() == 1)</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;train_net: &quot; &lt;&lt; &quot;\&quot;&quot; &lt;&lt; trainNetworkFileName &lt;&lt; &quot;\&quot;&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="stringliteral">  if(rbutton_enableTestNet_yes.get_active() == 1)</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;test_net: &quot; &lt;&lt; &quot;\&quot;&quot; &lt;&lt; testNetworkFileName &lt;&lt; &quot;\&quot;&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="stringliteral">  else if(rbutton_enableTestNet_no.get_active() == 1)</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;#test_net: &quot; &lt;&lt; &quot;\&quot;&quot; &lt;&lt; testNetworkFileName &lt;&lt; &quot;\&quot;&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="stringliteral">  if(rbutton_enableValidationParameters_yes.get_active() == 1)</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;test_iter: &quot; &lt;&lt; testIter &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;test_interval: &quot; &lt;&lt; testInterval &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="stringliteral">  else if(rbutton_enableValidationParameters_no.get_active() == 1)</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;#test_iter: &quot; &lt;&lt; testIter &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;#test_interval: &quot; &lt;&lt; testInterval &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="stringliteral">  if(rbutton_enableAverageLoss_yes.get_active() == 1)</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;average_loss: &quot; &lt;&lt; averageLoss &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="stringliteral">  else if(rbutton_enableAverageLoss_no.get_active() == 1)</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;#average_loss: &quot; &lt;&lt; averageLoss &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="stringliteral">  if(rbutton_enableRandomSample_yes.get_active() == 1)</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;random_seed: &quot; &lt;&lt; randomSample &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="stringliteral">  else if(rbutton_enableRandomSample_no.get_active() == 1)</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="stringliteral">    myfile &lt;&lt; &quot;#random_seed: &quot; &lt;&lt; randomSample &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;display: &quot; &lt;&lt; display &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;debug_info: &quot; &lt;&lt; debugInfo &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;snapshot: &quot; &lt;&lt; snapshot &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;test_compute_loss: &quot; &lt;&lt; testComputeLoss &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;snapshot_prefix: &quot; &lt;&lt; &quot;\&quot;&quot; &lt;&lt; snapshotPrefix &lt;&lt; &quot;\&quot;&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;max_iter: &quot; &lt;&lt; maxIter &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;type: &quot; &lt;&lt; &quot;\&quot;&quot; &lt;&lt; type &lt;&lt; &quot;\&quot;&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;lr_policy: &quot; &lt;&lt; &quot;\&quot;&quot; &lt;&lt; learningRatePolicy &lt;&lt; &quot;\&quot;&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;base_lr: &quot; &lt;&lt; baseLearningRate &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;gamma: &quot; &lt;&lt; gamma &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;power: &quot; &lt;&lt; power &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;stepsize: &quot; &lt;&lt; stepSize &lt;&lt; std::endl;  </span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;stepvalue: &quot; &lt;&lt; stepSizeValue &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;weight_decay: &quot; &lt;&lt; weightDecay &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="stringliteral">  myfile &lt;&lt; &quot;momentum: &quot; &lt;&lt; momentum &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="stringliteral">  myfile.close();</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="stringliteral">2.4.4) Calling the solverProperties class from ODConvTrainer and the corresponding mnist curtom solver example{#commit2_fourth_change_4}</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="stringliteral">The solverProperties class object was called in detectors/global2D/training/ODConvTrainer.cpp file. This was done using the code </span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="stringliteral">void ODConvTrainer::setSolverProperties(int argc, char *argv[])</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="stringliteral">  auto app = Gtk::Application::create(argc, argv, &quot;org.gtkmm.example&quot;);</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="stringliteral">  SolverProperties solverProperties;</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="stringliteral">  solverProperties.set_default_geometry (10000, 10000);</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="stringliteral">  app-&gt;run(solverProperties);</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="stringliteral">  ODConvTrainer::solverLocation = solverProperties.solverFileName;</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="stringliteral">The above code invoked the gtkmm solver window and in turn was used by the file examples/objectdetector/od_cnn_mnist_train_customSolver.cpp, where a ODTrainer object called the function mentioned above, the snippet from examples/objectdetector/od_cnn_mnist_train_customSolver.cpp is below,</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="stringliteral">od::g2d::ODConvTrainer *mnist_trainer = new od::g2d::ODConvTrainer(&quot;&quot;,&quot;&quot;);</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="stringliteral">mnist_trainer-&gt;setSolverProperties(argc,argv);</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="stringliteral">mnist_trainer-&gt;startTraining();</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="stringliteral">2.4.5)Features of solver creator{#commit2_fourth_change_5}</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="stringliteral">**1) The above code promts the user if any mistake is made from user-end.**</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="stringliteral">**2) Pressing update button every time may be time consuming, hence the latest commits involve the fact that without pressing the buttons the parameters cab ne edited**</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="stringliteral">**3) The main function of the update buttons after every parameter is make sure that, for future developments, if the intermediate parameters are to be accessed, the current version enables it.**</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="stringliteral">**4) Not many open source libraries had this functionality**</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="stringliteral">2.5) Network creator first version, commit 2.5{#commit2_fifth}</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="stringliteral">In this commit, network creator was added, based on gtkmm and caffe library, to the opendetection source. The [fragmented commit: Custom network designer added part1](https://github.com/abhi-kumar/opendetection/commit/768364812b6c30c2f27b6f768fec1366a9cb0885), involved additions of 15 code source files.</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="stringliteral">To understand each layer in caffe, please refer to [blog post here](https://abhishek4273.com/2016/02/07/ann-chapter-3-deep-learning-using-caffe-python/)</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="stringliteral">The major class, networkCreator, was introduced into files detectors/global2D/training/network.h and detectors/global2D/training/network.cpp. </span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="stringliteral">As mentioned earlier, it is clear as to how to initialize, place and show elements like buttons, radiobuttons, labels, and text-boxes. Herein a new elemet is introduced, dropDownBox.</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="stringliteral">2.5.1) Current Features to the {#commit2_fifth_change_1}</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="stringliteral">a) The activation category includes the following activation layers</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="stringliteral">  - Absolute Value (AbsVal) Layer</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="stringliteral">  - Exponential (Exp) Layer</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="stringliteral">  - Log Layer</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="stringliteral">  - Power Layer</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="stringliteral">  - Parameterized rectified linear unit (PReLU) Layer</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="stringliteral">  - Rectified linear unit (ReLU) Layer</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="stringliteral">  - Sigmoid Layer</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="stringliteral">  - Hyperbolic tangent (TanH) Layer</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="stringliteral">b) The critical category includes the most crucial layers</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="stringliteral">  - Accuracy Layer</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="stringliteral">  - Convolution Layer</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="stringliteral">  - Deconvolution layer</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="stringliteral">  - Dropout Layer</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="stringliteral">  - InnerProduct (Fully Connected) Layer</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="stringliteral">  - Pooling Layer</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="stringliteral">  - Softmax classification Layer</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="stringliteral">c) The weight initializers include the following options</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="stringliteral">  - Constant</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="stringliteral">  - Uniform</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="stringliteral">  - Gaussian</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="stringliteral">  - Positive Unit Ball</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="stringliteral">  - Xavier</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="stringliteral">  - MSRA</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="stringliteral">  - Bilinear</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="stringliteral">d) One more important feature included is that user can display the layers and simultaneously during the display delete the layers at the end.</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="stringliteral"> </span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="stringliteral">2.5.2) How to introduce a dropdown menu example{#commit2_fifth_change_2}</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="stringliteral">In the header file, example, in network.h the following was added, please refer comments in the code below</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="stringliteral">Gtk::ComboBox     combo_activationLayerType;        //Box to hold all the drop boxes</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="stringliteral">class ModelColumns : public Gtk::TreeModel::ColumnRecord</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="stringliteral">  public:</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="stringliteral">    ModelColumns(){ add(m_col_id); add(m_col_name); add(m_col_extra);}</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="stringliteral">    Gtk::TreeModelColumn&lt;int&gt; m_col_id;       //Id to every drop down list</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="stringliteral">    Gtk::TreeModelColumn&lt;Glib::ustring&gt; m_col_name;     //Name to every drop down list</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="stringliteral">    Gtk::TreeModelColumn&lt;Glib::ustring&gt; m_col_extra;    //Extra details to every drop down list</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="stringliteral">ModelColumns      column_activationLayerType;</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="stringliteral">Gtk::CellRendererText   cell_activationLayerType;</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="stringliteral">Glib::RefPtr&lt;Gtk::ListStore&gt;  ref_activationLayerType;</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="stringliteral">Similarly, for all other layer types comboCoxes, modelColumns etc were added into the code.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="stringliteral">Now, in the cpp file, example, in network.cpp the following was added, please refer comments in the code below</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="stringliteral">ref_activationLayerType = Gtk::ListStore::create(column_activationLayerType);   //create an object for list</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="stringliteral">combo_activationLayerType.set_model(ref_activationLayerType);       //add list to combobox</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="stringliteral">//First item in list</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="stringliteral">Gtk::TreeModel::Row row_activationLayerType = *(ref_activationLayerType-&gt;append());</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="stringliteral">row_activationLayerType[column_activationLayerType.m_col_id] = 1;</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="stringliteral">row_activationLayerType[column_activationLayerType.m_col_name] = &quot;AbsVal&quot;;</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="stringliteral">row_activationLayerType[column_activationLayerType.m_col_extra] = &quot;Absolute Value Layer&quot;;</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="stringliteral">combo_activationLayerType.set_active(row_activationLayerType);</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="stringliteral">//Second item in list</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="stringliteral">row_activationLayerType = *(ref_activationLayerType-&gt;append());</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="stringliteral">row_activationLayerType[column_activationLayerType.m_col_id] = 2;</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="stringliteral">row_activationLayerType[column_activationLayerType.m_col_name] = &quot;Exp&quot;;</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="stringliteral">row_activationLayerType[column_activationLayerType.m_col_extra] = &quot;Exponential Layer&quot;;</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="stringliteral">//Attach list items to combobox</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="stringliteral">combo_activationLayerType.pack_start(column_activationLayerType.m_col_id);</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="stringliteral">combo_activationLayerType.pack_start(column_activationLayerType.m_col_name);</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="stringliteral">combo_activationLayerType.set_cell_data_func(cell_activationLayerType,  sigc::mem_fun(*this, &amp;NetworkCreator::on_cell_data_extra));</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="stringliteral">combo_activationLayerType.pack_start(cell_activationLayerType);</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="stringliteral">//Attach combobox to grid</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="stringliteral">m_grid1.attach(combo_activationLayerType,2,1,2,1);</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="stringliteral">combo_activationLayerType.signal_changed().connect( sigc::mem_fun(*this, &amp;NetworkCreator::on_combo_changed) );</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="stringliteral">Thus rest of the thisngs can be added.</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="stringliteral">The color to the listbox is added into the detectors/global2D/training/mainWindow.h file. The snippet below is added to the function on_cell_data_extra()</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="stringliteral">auto row_activationLayerType = *iter;</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="stringliteral">const Glib::ustring extra_activationLayerType = row_activationLayerType[column_activationLayerType.m_col_extra];</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="stringliteral">if(extra_activationLayerType.empty())</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="stringliteral">  cell_activationLayerType.property_text() = &quot;(none)&quot;;</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="stringliteral">else</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="stringliteral">  cell_activationLayerType.property_text() = &quot;-&quot; + extra_activationLayerType + &quot;-&quot;;</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="stringliteral">cell_activationLayerType.property_foreground() = &quot;green&quot;; </span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="stringliteral">The main function here, when combo is changed, data stored in the variables are updated using the on_combo_changed() function. The following is the code snippet</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="stringliteral">Gtk::TreeModel::iterator iter_activationLayerType = combo_activationLayerType.get_active();</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="stringliteral">if(iter_activationLayerType)</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="stringliteral">  Gtk::TreeModel::Row row_activationLayerType = *iter_activationLayerType;</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="stringliteral">  if(row_activationLayerType)</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="stringliteral">    int id_activationLayerType = row_activationLayerType[column_activationLayerType.m_col_id];</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="stringliteral">    Glib::ustring name_activationLayerType = row_activationLayerType[column_activationLayerType.m_col_name];</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="stringliteral">//      std::cout &lt;&lt; &quot; ID=&quot; &lt;&lt; id_activationLayerType &lt;&lt; &quot;, name=&quot; &lt;&lt; name_activationLayerType &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="stringliteral">    activationLayerTypeData = name_activationLayerType;</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="stringliteral">\endcode </span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="stringliteral">2.5.3) Idea of multiple windows{#commit2_fifth_change_3}</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="stringliteral">For every drop down comboBox, one selected, and clicked the button next to it, a new window is opened. It as done usinf the functions</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="stringliteral">void showWindow_main();</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="stringliteral">void showWindow_activationLayerType(Glib::ustring data);</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="stringliteral">void showWindow_displayWindow();</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="stringliteral">void showWindow_criticalLayerType(Glib::ustring data);</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="stringliteral">void showWindow_normalizationLayerType(Glib::ustring data);</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="stringliteral">void showWindow_lossLayerType(Glib::ustring data);</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="stringliteral">void showWindow_extraLayerType(Glib::ustring data);</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="stringliteral">Each of these functions has an argument &quot;data&quot;, this argument refers to the type of layer that needs to be appended. Each of these functions are placed into a different file, activationWindow.h, lossWindow.h, mainWindow.h, criticalWindow.h, normalizationWindow.h and extraWindow.h. And with regards to the argument &quot;data&quot;, different elemts are shown on window. Say, when TanH is the argument, different elements are shown as to when Sigmoid is the argument.</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="stringliteral">2.5.4) Displaying network and deleting layer at the end{#commit2_fifth_change_4}</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="stringliteral">When the layers are appended into the network, displaying it is a necessity to make sure if everythig is proper or not. The code at displayWindow.h, inside the function showWindow_displayWindow(), enables the display. </span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="stringliteral">void NetworkCreator::showWindow_displayWindow()</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="stringliteral">  remove();</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="stringliteral">  set_title(&quot;Display Entire Network&quot;);</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="stringliteral">  set_border_width(10);</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="stringliteral">  add(box_fullCnnLayerMatter);</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="stringliteral">  buffer_fullCnnLayerMatter-&gt;set_text(fullCnnLayerMatter);</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="stringliteral">  textView_fullCnnLayerMatter.set_buffer(buffer_fullCnnLayerMatter);</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="stringliteral">  show_all_children();</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="stringliteral">Herein, the variable fullCnnLayerMatter gets updated everytime before display using a node from detectors/global2D/training/node.h. This file implements a linked list, which whenever a layer is added, adds a node to the list.</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="stringliteral">The structre of the node is as follows</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="stringliteral">struct Node {</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="stringliteral">  Glib::ustring data;</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="stringliteral">  Node* nextLayer;</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="stringliteral">If no layer has been added before, the list is initialized using,</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="stringliteral">void initializeLayer(struct Node *headLayer, Glib::ustring data)</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="stringliteral">  headLayer-&gt;data = data;</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="stringliteral">  headLayer-&gt;nextLayer = NULL;</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="stringliteral">If list has been initialised, next upcoming layers are appended using,</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="stringliteral">void appendLayer(struct Node *headLayer, Glib::ustring data)</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="stringliteral">  Node *newLayer = new Node;</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="stringliteral">  newLayer-&gt;data = data;</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="stringliteral">  newLayer-&gt;nextLayer = NULL;</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="stringliteral">  Node *currentLayer = headLayer;</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="stringliteral">  while(currentLayer)</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="stringliteral">    if(currentLayer-&gt;nextLayer == NULL)</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="stringliteral">    {</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="stringliteral">      currentLayer-&gt;nextLayer = newLayer;</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="stringliteral">      return;</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="stringliteral">    currentLayer = currentLayer-&gt;nextLayer;</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="stringliteral">The network&#39;</span>s last layer can be deleted, with the button <span class="stringliteral">&quot;Delete Layer&quot;</span> in the display window, with the base <span class="keyword">function</span> as,</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="keywordtype">bool</span> deleteLayer(<span class="keyword">struct</span> <a class="code" href="struct_node.html">Node</a> **headLayer, <a class="code" href="struct_node.html">Node</a> *deleteLayer) </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;{</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <a class="code" href="struct_node.html">Node</a> *currentLayer = *headLayer;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">if</span>(deleteLayer == *headLayer)</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    *headLayer = currentLayer-&gt;<a class="code" href="struct_node.html#aaa9e33aa02bd8bcd9282842aa799f2c3">nextLayer</a>;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keyword">delete</span> deleteLayer;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="keywordflow">while</span>(currentLayer)</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">if</span>(currentLayer-&gt;<a class="code" href="struct_node.html#aaa9e33aa02bd8bcd9282842aa799f2c3">nextLayer</a> == deleteLayer)</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      currentLayer-&gt;<a class="code" href="struct_node.html#aaa9e33aa02bd8bcd9282842aa799f2c3">nextLayer</a> = deleteLayer-&gt;<a class="code" href="struct_node.html#aaa9e33aa02bd8bcd9282842aa799f2c3">nextLayer</a>;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keyword">delete</span> deleteLayer;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    currentLayer = currentLayer-&gt;<a class="code" href="struct_node.html#aaa9e33aa02bd8bcd9282842aa799f2c3">nextLayer</a>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  }</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;}</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;\endcode</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;Any layer properties can be searched <span class="keyword">using</span> the folowwing search <span class="keyword">function</span>,</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="keyword">struct </span><a class="code" href="struct_node.html">Node</a> *searchLayer(<span class="keyword">struct</span> <a class="code" href="struct_node.html">Node</a> *headLayer, Glib::ustring <a class="code" href="struct_node.html#afa559ea7058661196a500141f93c9205">data</a>)</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <a class="code" href="struct_node.html">Node</a> *currentLayer = headLayer;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keywordflow">while</span>(currentLayer)</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">if</span>(currentLayer-&gt;<a class="code" href="struct_node.html#afa559ea7058661196a500141f93c9205">data</a> == data) </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="keywordflow">return</span> currentLayer;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    currentLayer = currentLayer-&gt;<a class="code" href="struct_node.html#aaa9e33aa02bd8bcd9282842aa799f2c3">nextLayer</a>;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  std::cout &lt;&lt; <span class="stringliteral">&quot;No Layer &quot;</span> &lt;&lt; data &lt;&lt; <span class="stringliteral">&quot; in the CNN.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;}</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;\endcode</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;As mentioned earlier, when the network is to be displayed, the variable fullCnnLayerMatter,  is updated, <span class="keyword">using</span> the following <span class="keyword">function</span>,</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;Glib::ustring displayCNN(<span class="keyword">struct</span> <a class="code" href="struct_node.html">Node</a> *headLayer)</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;{</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <a class="code" href="struct_node.html">Node</a> *cnn = headLayer;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  Glib::ustring fullCnnLayerMatter = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <span class="keywordflow">while</span>(cnn)</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">//    std::cout &lt;&lt; cnn-&gt;data &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    fullCnnLayerMatter += cnn-&gt;<a class="code" href="struct_node.html#afa559ea7058661196a500141f93c9205">data</a>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    cnn = cnn-&gt;<a class="code" href="struct_node.html#aaa9e33aa02bd8bcd9282842aa799f2c3">nextLayer</a>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">//  std::cout &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">//  std::cout &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordflow">return</span> fullCnnLayerMatter;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;}</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;\endcode</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;\n </div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;2.6) Network creator second version, commit 2.6{#commit2_sixth}</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;---</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;In <span class="keyword">this</span> commit, network creator was appended with Normalization layer properties, based on gtkmm and caffe library, to the opendetection source. The [fragmented commit: Added Normalization layers in the customised trainer](https:<span class="comment">//github.com/abhi-kumar/opendetection/commit/c99ec1a7c8a5b913a50d62ceecbfea59fb8222a1), involved additions/changes of 3 code source files.</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;It had three Normalization layer options involved,</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  - Batch Normalization (BatchNorm) Layer</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  - Local Response Normalization (LRN) Layer</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  - Multivariate Response Normalization (MVN) Layer</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;\n</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;2.7) Selective search based <span class="keywordtype">object</span> locatization version 1, commit 2.7{#commit2_seventh}</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;---</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;In <span class="keyword">this</span> commit, slective serach based <span class="keywordtype">object</span> localization, based on opencv library, was added to the opendetection source. The [fragmented commit: Selective Search Beta Version Added](https:<span class="comment">//github.com/abhi-kumar/opendetection/commit/eebfee93d4fc82296d38dbb0e54d0a9a6e9f94fa), involved additions/changes of 21 code source files.</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;To understand the selective search based <span class="keywordtype">object</span> localization algorithm, please refer to [link here](http:<span class="comment">//koen.me/research/selectivesearch/)</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;The algo, when put simply, involves,</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  - Graph based image segmentation</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  - Finding different features of the all the segmented parts</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  - Finding closeness between the features of the neighboring parts</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  - Merging the closest parts and continuing futher till the algorithm is breaked.</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;2.7.1) Graph based image segmentation{#commit2_seventh_change_1}</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;---</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;With proper permission (conversation through mails) from the author P. Felzenszwalb(pff@ai.mit.edu) the code from [link](http:<span class="comment">//cs.brown.edu/~pff/segment/) was adopted and slightly modified in order to get the results as per the requirement of the algorithm.</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;This part involves 10 major code files, all adopted from the same link mentioned above</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  - detectors/global2D/localization/convolve.h</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  - detectors/global2D/localization/disjoint-set.h</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  - detectors/global2D/localization/filter.h</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  - detectors/global2D/localization/image.h</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  - detectors/global2D/localization/imconv.h</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  - detectors/global2D/localization/imutil.h</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  - detectors/global2D/localization/misc.h</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  - detectors/global2D/localization/pnmfile.h</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  - detectors/global2D/localization/segment-graph.h</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  - detectors/global2D/localization/segment-image.h</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;2.7.2) Selective Search Base class{#commit2_seventh_change_2}</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;---</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;The <span class="keyword">class </span>ODSelectiveSearchBase, detectors/global2D/localization/ODSelectiveSearchBase.cpp and detectors/global2D/localization/ODSelectiveSearchBase.h, derived over the public elements of ODDetector2D, has a set of very important functions, </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  - acuiring the image</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  - preprocessing the image</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  - using the 10 major code files mentioned above in a customized way to segment the image and extract the clustered components.</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;The header file has the following variables,</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;Mat img, cluster, outputImg, sp_preProcessed, gray_mask;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="keywordtype">int</span> inputImageHeight;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="keywordtype">int</span> inputImageWidth;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="keywordtype">int</span> total_masks;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;vector &lt; vector &lt;int&gt; &gt; sp;   <span class="comment">//container for the cluster </span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;\endcode</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;In <span class="keyword">this</span> <span class="keyword">class</span>, the image is aquired <span class="keyword">using</span> the following snippet from the .cpp file,</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="keywordtype">void</span> ODSelectiveSearchBase::acquireImages(<span class="keywordtype">string</span> imageLocation, <span class="keywordtype">int</span> imgWidth, <span class="keywordtype">int</span> imgHeight)</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;{</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  inputImageHeight = imgHeight;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  inputImageWidth = imgWidth;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  img = imread(imageLocation,1);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  resize(img, img, Size(imgWidth,imgHeight));</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  cluster = imread(imageLocation,1);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  resize(cluster, cluster, Size(imgWidth,imgHeight));</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  outputImg = imread(imageLocation,1);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  resize(outputImg, outputImg, Size(imgWidth,imgHeight));</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;\endcode</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;The preprocessing is done <span class="keyword">using</span>,</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;Mat ODSelectiveSearchBase::preProcessImg(Mat image)</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;{</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  vector&lt;Mat&gt; channels; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  Mat img_hist_equalized;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  cvtColor(image, img_hist_equalized, CV_BGR2YCrCb); </div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  split(img_hist_equalized,channels); </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  equalizeHist(channels[0], channels[0]); </div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  merge(channels,img_hist_equalized);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  cvtColor(img_hist_equalized, img_hist_equalized, CV_YCrCb2BGR);</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordflow">return</span> img_hist_equalized;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;}</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;\endcode</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;Herein, the preprocessing is done as</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  - conversion of BGR image to YCrCb</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  - first channel, the one with the intensity is eualized</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  - reconversion of eualized YCrCb image to BGR color type</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;This is followed by graph based image segmentation by the <span class="keyword">function</span>, </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;vector &lt; vector &lt;int&gt; &gt; ODSelectiveSearchBase::getSuperPixels(Mat im, <span class="keywordtype">int</span> &amp;totalMasks, <span class="keywordtype">float</span> Sigma, <span class="keywordtype">float</span> K, <span class="keywordtype">float</span> Min_size, <span class="keywordtype">string</span> imageLocation)</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;\endcode</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;Image is first segmented,</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="keywordtype">string</span> img_location = imageLocation + <span class="stringliteral">&quot;img.ppm&quot;</span>;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;imwrite(img_location, im);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="keywordtype">float</span> sigma = Sigma;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="keywordtype">float</span> k = K;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="keywordtype">int</span> min_size = Min_size;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<a class="code" href="classimage.html">image&lt;rgb&gt;</a> *input = loadPPM(img_location.c_str());</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="keywordtype">int</span> num_ccs; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<a class="code" href="classimage.html">image&lt;rgb&gt;</a> *seg = segment_image(input, sigma, k, min_size, &amp;num_ccs);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<a class="code" href="classimage.html">image&lt;uchar&gt;</a> *gr = imageRGBtoGRAY(seg);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="keywordtype">int</span> num = imRef(seg,0,0).r;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;\endcode</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;Herein, the image after preprocessing, is stored in <span class="stringliteral">&quot;.ppm&quot;</span> format as the segmentation code only prefers image in that format. Image is then segmented <span class="keyword">using</span> the segment_image <span class="keyword">function</span> and to find the number of segments, num, it is converted to grayscale and the number of colors there then represent the number of segments.</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;The next step is to create a list of those segments. It is not often possible to create an uchar grayscale image mask with opencv here, because, opencv supports color version from 0 to 255 and in most cases the segments are greater than 255. Thus, we first store, every pixel<span class="stringliteral">&#39;s value in the previous rgb image with the pixel&#39;</span>s location into a text file named <span class="stringliteral">&quot;segmented.txt&quot;</span>.</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;ofstream myfile;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;myfile.open(<span class="stringliteral">&quot;segmented.txt&quot;</span>);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="keywordflow">for</span>(<span class="keywordtype">int</span> R = 0; R &lt; seg-&gt;<a class="code" href="classimage.html#a7703c5fa4f43e3aedb28c6056ac7d96a">height</a>(); R++)</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;{</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> C = 0; C &lt; seg-&gt;<a class="code" href="classimage.html#a51d9e4a8e20b9a5af2e11e0e4b39815a">width</a>(); C++)</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordtype">int</span> numR, numG, numB, numGr;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    numR = imRef(seg,C,R).r;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    numG = imRef(seg,C,R).g;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    numB = imRef(seg,C,R).b;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    numGr = imRef(gr,C,R);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    myfile &lt;&lt; numR &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; numG &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; numB &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; numGr &lt;&lt; endl;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  }</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;}</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="keywordtype">string</span> output_location = <span class="stringliteral">&quot;../images/img.ppm&quot;</span>;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;savePPM(seg, output_location.c_str());</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;myfile.close();</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;\endcode</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;Now the task was to create a uniform label <span class="keywordflow">for each</span> segment, something like, first segment as 1, second as 2 and so on and <span class="keyword">this</span> was carries out <span class="keyword">using</span>,</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;vector&lt; vector &lt;int&gt; &gt; mem;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;mem.resize(num, std::vector&lt;int&gt;(3, 0));</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;vector &lt;int&gt; val;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;val.resize(num, 0);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="keywordtype">int</span> insertion_mem_index = 1;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; num; i++)</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;{</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  infile &gt;&gt; R &gt;&gt; G &gt;&gt; B &gt;&gt; GR;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">if</span>(i==0)</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    mem[i][0] = R;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    mem[i][1] = G;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    mem[i][2] = B;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    val[i] = maskValue;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    mask[H][W] = val[0];</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  }</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    vector &lt;int&gt; query = {R, G, B};</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    vector &lt;vector &lt;int&gt; &gt; ::iterator it;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keyword">auto</span> pos =find(mem.begin(),mem.end(),query);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">if</span>(pos != mem.end())</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      mask[H][W] = val[pos-mem.begin()];</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    }</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      mem[insertion_mem_index][0] = R;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      mem[insertion_mem_index][1] = G;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      mem[insertion_mem_index][2] = B;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      maskValue++;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      insertion_mem_index++;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      val[insertion_mem_index] = maskValue;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      mask[H][W] = maskValue;       </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    }</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  W = W + 1;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keywordflow">if</span>(W==im.cols)</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    H = H + 1;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    W = 0;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;totalMasks = maskValue;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="keywordflow">return</span> mask;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;\endcode</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;\n </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;2.7.3) Selective Search Model <span class="keyword">class</span> and example of selective search based localization{#commit2_seventh_change_3}</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;---</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;These introduced files, detectors/global2D/localization/ODSelectiveSearchModel.cpp and detectors/global2D/localization/ODSelectiveSearchModel.h, have the following responsibilities(not in order)</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  - calculating histogram of the different features</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  - finding neighbors <span class="keywordflow">for each</span> of the clustered region</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  - finding similarities( or closure distance) between two regions based on the histogram of different features</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  - merging the closest regions</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  - removing very small and very big clusters</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  - adding ROIs to images based on merged regions</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;The functions will make more sense with a side by side explanation of the file /examples/objectdetector/od_localize_selective_search.cpp, which specifies an example of selective search based localization of objects.</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;This selective search has a set of 13 parameters which drive the entire algo here. The example<span class="stringliteral">&#39;s first part includes the base class,</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="stringliteral">od::g2d::ODSelectiveSearchBase ss;</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="stringliteral">string imageLocation = &quot;../examples/objectdetector/Localization_Images/&quot;; //Para 1</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="stringliteral">string imageName = &quot;sample1.png&quot;;           // Para 1.1</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="stringliteral">int imgWidth = 640;             //Para 2</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="stringliteral">int imgHeight = 480;              //Para 3</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="stringliteral">string im = imageLocation + imageName;  </span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="stringliteral">ss.acquireImages(im, imgWidth, imgHeight);</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="stringliteral">ss.sp_preProcessed = ss.preProcessImg(ss.img);</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="stringliteral">float sigma = 0.5;              //Para 4</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="stringliteral">float k = 580;                //Para 5</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="stringliteral">int min_size = 50;              //Para 6</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="stringliteral">ss.sp = ss.getSuperPixels(ss.sp_preProcessed, ss.total_masks, sigma, k, min_size, imageLocation);</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="stringliteral">Parameter 1 : Image file location, this is important because all the temporary files created will also be stored here</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="stringliteral">Parameter 1.1 : Image file name ( **make sure you don&#39;</span>t name image as img.png or img.ppm** )</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;Parameter 2 : Height to which it has to be resized</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;Parameter 3 : Width to which it has to be resized</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;The functions acquireImages and preProcessImg have been discussed earlier.</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;Parameters 4,5,6 : These will be more specifically understood once selective search algorithm paper is read [here](http:<span class="comment">//koen.me/research/selectivesearch/)</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;getSuperPixels <span class="keyword">function</span> mentioned above, as stated there too, is <span class="keywordflow">for</span> clustering. </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;The next part comes as creation of the model <span class="keyword">class</span> <span class="keywordtype">object</span>,</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<a class="code" href="classod_1_1g2d_1_1_o_d_selective_search_model.html">od::g2d::ODSelectiveSearchModel</a> regions[ss.total_masks];</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="keywordtype">int</span> min_height = 20;              <span class="comment">//Para 7</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="keywordtype">int</span> min_width = 20;             <span class="comment">//Para 8</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<a class="code" href="namespaceod_1_1g2d.html#a5cf5355ae46651c7576e57b4afa3c209">od::g2d::refineRegions</a>(ss.sp, ss.total_masks, regions, min_height, min_width);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="keywordtype">float</span> spSize = ss.sp.size() * ss.sp[0].size();</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;\endcode</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;Instead of creating a single object, an <span class="keywordtype">object</span> is created <span class="keywordflow">for</span> every clustered <span class="keywordtype">object</span> in the form of array of objects. </div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;Parameter 7 : Any clustered region with a pixels size of less <span class="keyword">this</span> height is not considered</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;Parameter 8 : Any clustered region with a pixels size of less <span class="keyword">this</span> width is not considered </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;This, discarding of the regions is carried out <span class="keyword">using</span> the functions refineRegions,</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="keywordtype">void</span> refineRegions(vector &lt; vector &lt;int&gt; &gt; sp, <span class="keywordtype">int</span> total_masks, ODSelectiveSearchModel regions[], <span class="keywordtype">int</span> min_height, <span class="keywordtype">int</span> min_width)</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;{</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; total_masks; i++)</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  {</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    regions[i].setLabel(i);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    regions[i].min_x = 100000;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    regions[i].min_y = 100000;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    regions[i].max_x = -1;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    regions[i].max_y = -1;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  }</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = 0; r &lt; sp.size(); r++)</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; sp[0].size(); c++)</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      regions[sp[r][c]].size++;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      <span class="keywordflow">if</span>(regions[sp[r][c]].min_x &gt; c)</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        regions[sp[r][c]].min_x = c;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;      <span class="keywordflow">if</span>(regions[sp[r][c]].min_y &gt; r)</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        regions[sp[r][c]].min_y = r;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <span class="keywordflow">if</span>(regions[sp[r][c]].max_x &lt; c)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        regions[sp[r][c]].max_x = c;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      <span class="keywordflow">if</span>(regions[sp[r][c]].max_y &lt; r)</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        regions[sp[r][c]].max_y = r;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    }</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; total_masks; i++)</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  {</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span>((regions[i].max_x - regions[i].min_x &gt; min_width) and (regions[i].max_y - regions[i].min_y &gt; min_height))</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      regions[i].validity = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      regions[i].validity = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;}</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;\endcode</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;Another purpose of <span class="keyword">this</span> <span class="keyword">function</span> is to find the boundaries on these irregulary shaped clustered regions. The functions finds the minimum and maximum x and y pixel coordinates of each region</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;Next step is to find histogram of features of each of the regions,</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="keywordtype">int</span> histSize = 25;              <span class="comment">//Para 9</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="keywordtype">float</span> hist_range_min = 1;             <span class="comment">//Para 10</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="keywordtype">float</span> hist_range_max = 255;           <span class="comment">//Para 11</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<a class="code" href="namespaceod_1_1g2d.html#a4f8d695d48676f65224899d29ecd414b">od::g2d::createModel</a>(ss.sp, ss.total_masks, ss.gray_mask, regions, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;\endcode</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;Parameter 9: Size of the bin in the histogram of features</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;Parameter 10 and 11: Range of values to be considered <span class="keywordflow">while</span> calculating the histogram</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;The <span class="keyword">function</span> createModel is designed to find the histogram matrices,</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="keywordtype">void</span> createModel(vector &lt; vector &lt;int&gt; &gt; sp, <span class="keywordtype">int</span> total_masks, Mat grayMask, ODSelectiveSearchModel regions[], <span class="keywordtype">int</span> histSize, <span class="keywordtype">float</span> hist_range_min, <span class="keywordtype">float</span> hist_range_max)</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;{</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  Mat regionMask = grayMask.clone();</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; total_masks; i++)</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    regionMask = grayMask.clone();</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = 0; r &lt; sp.size(); r++)</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; sp[0].size(); c++)</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <span class="keywordflow">if</span>(sp[r][c] != i)</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;          regionMask.at&lt;uchar&gt;(r,c) = 0;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      }</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    }</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordflow">if</span>(regions[i].size&lt;200)</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      regions[i].validity = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="comment">//Hessian Matrix</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    regions[i].xx_hist = get_hess_hist_xx(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    regions[i].xy_hist = get_hess_hist_xy(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    regions[i].yy_hist = get_hess_hist_yy(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="comment">//orientation Matrix</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    regions[i].orientation_image_hist = get_orientation_hist(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="comment">//Differential Excitation Matrix</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    regions[i].differential_excitation_hist = get_diff_exci_hist(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="comment">//Color Histogram</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordtype">float</span> range[] = { hist_range_min, hist_range_max } ;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* histRange = { range };</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keywordtype">bool</span> uniform = <span class="keyword">true</span>; <span class="keywordtype">bool</span> accumulate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    calcHist(&amp;grayMask, 1, 0, Mat(), regions[i].color_hist, 1, &amp;histSize, &amp;histRange, uniform, accumulate );</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;}</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;\endcode</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;**Note: There<span class="stringliteral">&#39;s an hidden parameter here, which decides the region&#39;</span>s validity. It works on the conception that every region should have atleast a certain number of pixels, here 200. This number can be manipulated <span class="keywordflow">if</span> needed**</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;Four matrices are calculated:</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  - [Hessian Matrix](http:<span class="comment">//mathworld.wolfram.com/Hessian.html)</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  - [Orientation Matrix](http:<span class="comment">//www.ee.oulu.fi/~jiechen/paper/TPAMI2009-WLD.pdf)</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  - [Differential Excitation Matrix](http:<span class="comment">//www.ee.oulu.fi/~jiechen/paper/TPAMI2009-WLD.pdf)</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  - Color Histogram Matrix</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;Hessian Matrix is calculated in xx, xy and yy type <span class="keywordtype">double</span> differentiations, the matrices used are ( in same order),</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;kernel_filter_1 = (Mat_&lt;double&gt;(7,7) &lt;&lt; 1.57130243e-04, 7.17839338e-04, 0, -1.76805171e-03, 0, 7.17839338e-04, 1.57130243e-04,</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                1.91423823e-03, 8.74507340e-03, 0, -2.15392793e-02, 0, 8.74507340e-03, 1.91423823e-03,</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                8.57902057e-03, 3.91926999e-02, 0, -9.65323526e-02, 0, 3.91926999e-02, 8.57902057e-03,</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                1.41444137e-02, 6.46178379e-02, 0, -1.59154943e-01, 0, 6.46178379e-02, 1.41444137e-02,</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                8.57902057e-03, 3.91926999e-02, 0, -9.65323526e-02, 0, 3.91926999e-02, 8.57902057e-03,</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                1.91423823e-03, 8.74507340e-03, 0, -2.15392793e-02, 0, 8.74507340e-03, 1.91423823e-03,</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                1.57130243e-04, 7.17839338e-04, 0, -1.76805171e-03, 0, 7.17839338e-04, 1.57130243e-04</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;            );</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;kernel_filter_2 = (Mat_&lt;double&gt;(7,7) &lt;&lt; 0.00017677, 0.00143568, 0.00321713, 0, -0.00321713, -0.00143568, -0.00017677,</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                0.00143568, 0.0116601, 0.02612847, 0, -0.02612847, -0.0116601, -0.00143568,</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                0.00321713, 0.02612847, 0.05854983, 0, -0.05854983, -0.02612847, -0.00321713,</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                0, 0, 0, 0, 0, 0, 0,</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                -0.00321713, -0.02612847, -0.05854983, 0, 0.05854983, 0.02612847, 0.00321713,</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                -0.00143568, -0.0116601, -0.02612847, 0, 0.02612847, 0.0116601, 0.00143568,</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                -0.00017677, -0.00143568, -0.00321713, 0, 0.00321713, 0.00143568, 0.00017677</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;              ); </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;kernel_filter_3 = (Mat_&lt;double&gt;(7,7) &lt;&lt; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        1.57130243e-04, 1.91423823e-03, 8.57902057e-03, 1.41444137e-02, 8.57902057e-03, 1.91423823e-03, 1.57130243e-04,</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        7.17839338e-04, 8.74507340e-03, 3.91926999e-02, 6.46178379e-02, 3.91926999e-02, 8.74507340e-03, 7.17839338e-04,</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00,</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        -1.76805171e-03, -2.15392793e-02, -9.65323526e-02, -1.59154943e-01, -9.65323526e-02, -2.15392793e-02, -1.76805171e-03,</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00,</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        7.17839338e-04, 8.74507340e-03, 3.91926999e-02, 6.46178379e-02, 3.91926999e-02, 8.74507340e-03, 7.17839338e-04,</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        1.57130243e-04, 1.91423823e-03, 8.57902057e-03, 1.41444137e-02, 8.57902057e-03, 1.91423823e-03, 1.57130243e-04</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;              );</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;\endcode</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;The Orientation matrix is calculated as,</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;Mat get_orientation_hist(Mat regionMask, <span class="keywordtype">int</span> histSize, <span class="keywordtype">float</span> hist_range_min, <span class="keywordtype">float</span> hist_range_max)</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;{</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  Mat kernel_filter_1(3,3, CV_32FC1,1);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  kernel_filter_1 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 1, 1, 1, 1, -8, 1, 1, 1, 1);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  Mat kernel_filter_2(3,3, CV_32FC1,1);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  kernel_filter_2 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 0,0,0,0,1,0,0,0,0);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  Mat kernel_filter_3(3,3, CV_32FC1,1);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  kernel_filter_3 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 1,2,1,0,0,0,-1,-2,-1);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  Mat kernel_filter_4(3,3, CV_32FC1,1);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  kernel_filter_4 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 1,0,-1,2,0,-2,1,0,-1);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  Mat image_filtered_v1;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  Mat image_filtered_v2;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  Mat image_filtered_v3;  </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  Mat image_filtered_v4;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keywordtype">int</span> temp30; </div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="comment">//filtering</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  filter2D(regionMask, image_filtered_v1, -1, kernel_filter_1,Point(-1,-1), 0,BORDER_DEFAULT );</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  filter2D(regionMask, image_filtered_v2, -1, kernel_filter_2,Point(-1,-1), 0,BORDER_DEFAULT );</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  filter2D(regionMask, image_filtered_v3, -1, kernel_filter_3,Point(-1,-1), 0,BORDER_DEFAULT );</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  filter2D(regionMask, image_filtered_v4, -1, kernel_filter_4,Point(-1,-1), 0,BORDER_DEFAULT );</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="comment">//Orientation New</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="keywordtype">float</span> temp_5;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <span class="keywordtype">float</span> temp_6;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="keywordtype">float</span> temp_7_theta;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keywordtype">float</span> temp_8_theta_dash;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <span class="keywordtype">int</span> temp_9_theta_dash_quantized;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="keywordtype">float</span> quantized_1[12] = {0,1,2,3,4,5,6,7,8,9,10,11};</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <span class="keywordtype">int</span> quantized_count_1 = 0;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="keywordtype">float</span> orientation_image_matrix[regionMask.rows][regionMask.cols];</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  Mat orientation_image = regionMask.clone();</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> r = 0; r &lt; regionMask.rows; r++)</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; regionMask.cols; c++)</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      orientation_image_matrix[r][c] = 0;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> r = 0; r &lt; regionMask.rows; r++)</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  {</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; regionMask.cols; c++)</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    {</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      temp_5 = image_filtered_v3.at&lt;schar&gt;(r,c);</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      temp_6 = image_filtered_v4.at&lt;schar&gt;(r,c);</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="keywordflow">if</span>(temp_6 != 0 &amp;&amp; temp_5 != 0)</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      {</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        temp_7_theta = atan(temp_5/temp_6);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      }</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_6 == 0 &amp;&amp; temp_5 &gt; 0)</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      {</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        temp_7_theta = M_PI/2;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      }</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_6 == 0 &amp;&amp; temp_5 &lt; 0)</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      {</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        temp_7_theta = -M_PI/2;</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      }</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_6 == 0 &amp;&amp; temp_5 == 0)</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        temp_7_theta = 0;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      }</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_6 != 0 &amp;&amp; temp_5 == 0)</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        temp_7_theta = 0;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      }     </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      <span class="keywordflow">if</span>(temp_5 &gt;= 0 &amp;&amp; temp_6 &gt;= 0)</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      {</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        temp_8_theta_dash = temp_7_theta;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      }</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_5 &lt; 0 &amp;&amp; temp_6 &gt;= 0)</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        temp_8_theta_dash = temp_7_theta + M_PI;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_5 &lt; 0 &amp;&amp; temp_6 &lt; 0)</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      {</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        temp_8_theta_dash = temp_7_theta + M_PI;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      }</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_5 &gt;= 0 &amp;&amp; temp_6 &lt; 0)</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        temp_8_theta_dash = temp_7_theta + 2*M_PI;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      }</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      temp_9_theta_dash_quantized = floor((temp_8_theta_dash*11)/(2*M_PI));</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      orientation_image_matrix[r][c] = temp_9_theta_dash_quantized;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      orientation_image.at&lt;uchar&gt;(r,c) = temp_9_theta_dash_quantized; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    }</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  }</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;<span class="comment">/*  for(int r = 0; r &lt; img.rows; r++)</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="comment">  {</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="comment">    for(int c = 0; c &lt; img.cols; c++)</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="comment">    {</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;<span class="comment">      cout &lt;&lt; orientation_image_matrix[r][c] &lt;&lt; &quot; &quot;;</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment">    cout &lt;&lt; endl;</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="comment">  }</span></div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="keywordtype">float</span> range[] = { hist_range_min, hist_range_max } ;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span>* histRange = { range };</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="keywordtype">bool</span> uniform = <span class="keyword">true</span>; <span class="keywordtype">bool</span> accumulate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  Mat orientation_image_hist;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment">  /// Compute the histograms:</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment"></span>  calcHist( &amp;orientation_image, 1, 0, Mat(), orientation_image_hist, 1, &amp;histSize, &amp;histRange, uniform, accumulate );</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="keywordflow">return</span> orientation_image_hist;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;}</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;\endcode</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;The differential excitation matrix is calculated as,</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;Mat get_diff_exci_hist(Mat regionMask, <span class="keywordtype">int</span> histSize, <span class="keywordtype">float</span> hist_range_min, <span class="keywordtype">float</span> hist_range_max)</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;{</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  Mat kernel_filter_1(3,3, CV_32FC1,1);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  kernel_filter_1 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 1, 1, 1, 1, -8, 1, 1, 1, 1);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  Mat kernel_filter_2(3,3, CV_32FC1,1);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  kernel_filter_2 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 0,0,0,0,1,0,0,0,0);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  Mat kernel_filter_3(3,3, CV_32FC1,1);</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  kernel_filter_3 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 1,2,1,0,0,0,-1,-2,-1);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  Mat kernel_filter_4(3,3, CV_32FC1,1);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  kernel_filter_4 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 1,0,-1,2,0,-2,1,0,-1);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  Mat image_filtered_v1;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  Mat image_filtered_v2;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  Mat image_filtered_v3;  </div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  Mat image_filtered_v4;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="keywordtype">int</span> temp30; </div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="comment">//filtering</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  filter2D(regionMask, image_filtered_v1, -1, kernel_filter_1,Point(-1,-1), 0,BORDER_DEFAULT );</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  filter2D(regionMask, image_filtered_v2, -1, kernel_filter_2,Point(-1,-1), 0,BORDER_DEFAULT );</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  filter2D(regionMask, image_filtered_v3, -1, kernel_filter_3,Point(-1,-1), 0,BORDER_DEFAULT );</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  filter2D(regionMask, image_filtered_v4, -1, kernel_filter_4,Point(-1,-1), 0,BORDER_DEFAULT );</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="comment">//Differential Excitation New</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="keywordtype">float</span> temp_1;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="keywordtype">float</span> temp_2;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="keywordtype">float</span> temp_3_alpha;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="keywordtype">float</span> temp_4_quantized_alpha;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <span class="keywordtype">int</span> quantized[8] = {0,1,2,3,4,5,6,7};</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="keywordtype">int</span> quantized_count = 0;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="keywordtype">int</span> differential_excitation_image_matrix[regionMask.rows][regionMask.cols];</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  Mat differential_excitation_image = regionMask.clone();</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> r = 0; r &lt; regionMask.rows; r++)</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  {</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; regionMask.cols; c++)</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      differential_excitation_image_matrix[r][c] = 0;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    }</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  }</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> r = 0; r &lt; regionMask.rows; r++)</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; regionMask.cols; c++)</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    {</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;      temp_1 = image_filtered_v1.at&lt;schar&gt;(r,c);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      temp_2 = image_filtered_v2.at&lt;schar&gt;(r,c);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="keywordflow">if</span>(temp_2 != 0)</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        temp_3_alpha = atan(temp_1/temp_2);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      }</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_2 == 0 &amp;&amp; temp_1 &gt; 0)</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        temp_3_alpha = M_PI/2;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      }</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_2 == 0 &amp;&amp; temp_1 &lt; 0)</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      {</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        temp_3_alpha = -M_PI/2;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      }</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(temp_2 == 0 &amp;&amp; temp_1 == 0)</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        temp_3_alpha = 0;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      temp_4_quantized_alpha = floor(((temp_3_alpha + M_PI/2)/M_PI)*7);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      differential_excitation_image_matrix[r][c] = temp_4_quantized_alpha;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      differential_excitation_image.at&lt;uchar&gt;(r,c) = temp_4_quantized_alpha;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    }</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  }</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="comment">/*  for(int r = 0; r &lt; img.rows; r++)</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="comment">  {</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;<span class="comment">    for(int c = 0; c &lt; img.cols; c++)</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="comment">    {</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">      cout &lt;&lt; differential_excitation_image_matrix[r][c] &lt;&lt; &quot; &quot;;</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;<span class="comment">    cout &lt;&lt; endl;</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">  }</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <span class="keywordtype">float</span> range[] = { hist_range_min, hist_range_max } ;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span>* histRange = { range };</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <span class="keywordtype">bool</span> uniform = <span class="keyword">true</span>; <span class="keywordtype">bool</span> accumulate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  Mat differential_excitation_hist;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;<span class="comment">  /// Compute the histograms:</span></div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment"></span>  calcHist( &amp;differential_excitation_image, 1, 0, Mat(), differential_excitation_hist, 1, &amp;histSize, &amp;histRange, uniform, accumulate );</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="keywordflow">return</span> differential_excitation_hist;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;}</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;\endcode</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;And the color histogram is calculated as,</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;calcHist(&amp;grayMask, 1, 0, Mat(), regions[i].color_hist, 1, &amp;histSize, &amp;histRange, uniform, accumulate );</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;\endcode</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;After <span class="keyword">this</span> the major <span class="keyword">function</span>, extractRois is called,</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="keywordtype">int</span> numRounds = ss.total_masks/2;         <span class="comment">//Para 12</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="keywordtype">int</span> minRegionSize = 200;            <span class="comment">//Para 13</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;vector &lt; vector &lt;int&gt; &gt; pts = <a class="code" href="namespaceod_1_1g2d.html#a8f24a57c183fd50da7fcce9e6e9ef436">od::g2d::extractROIs</a>(ss.total_masks, regions, numRounds, spSize, ss.sp, ss.img, ss.gray_mask, minRegionSize, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;\endcode</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;The Parameter numRounds indirectly manipulates the number of ROIs to be found in direct proportion.</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;The <span class="keyword">function</span> extractROI starts with a loop,</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="keywordflow">while</span>(checkRounds(totals, regions, numRounds) and value &gt; 0)</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;\endcode</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;This checkRounds <span class="keyword">function</span> is,</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="keywordtype">bool</span> checkRounds(<span class="keywordtype">int</span> totals, ODSelectiveSearchModel regions[], <span class="keywordtype">int</span> numRounds)</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;{</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="keywordtype">int</span> num = 0;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; totals; i++)</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordflow">if</span>(regions[i].validity == <span class="keyword">false</span>)</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      num++;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  }</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">//  cout &lt;&lt; &quot;num = &quot; &lt;&lt; num &lt;&lt; endl;</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="keywordflow">if</span>(num &gt; numRounds)</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;}</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;\endcode</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;It functions in two way,</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  - Checks whether numRounds limits is reached or not</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  - A round is considered only when its validity is <span class="keyword">false</span>, i.e., <span class="keywordflow">if</span> number of rounds with validy <span class="keyword">false</span> reach numRounds limit then code is stopped</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;Every loop inside extractRoi goes through,</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;vector &lt; vector &lt;int&gt; &gt; sp_neighbors = findNeighbors(regions, total_masks, img, sp);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;vector &lt;float&gt; similarities;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;sp_neighbors.size(); i++)</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;{</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="keywordtype">float</span> sim = calcSimilarities(regions[sp_neighbors[i][0]],regions[sp_neighbors[i][1]], spSize);  </div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="comment">//      cout &lt;&lt; i &lt;&lt; &quot;    &quot; &lt;&lt; sp_neighbors[i][0] &lt;&lt; &quot; &quot; &lt;&lt; sp_neighbors[i][1] &lt;&lt; &quot;    &quot; &lt;&lt; sim &lt;&lt; endl;</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  similarities.push_back(sim);</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;}</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment">//finding closest two regions</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;value = min_element(similarities.begin(), similarities.end()) - similarities.begin();</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="comment">//    cout &lt;&lt; &quot;in here&quot; &lt;&lt; endl;</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment">//merging</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;mergeRegions(value, regions, sp_neighbors, gray_mask, sp, minRegionSize, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment">//    cout &lt;&lt; &quot;value = &quot; &lt;&lt; value &lt;&lt; endl;</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; total_masks; i++)</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;{</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keywordflow">if</span>(regions[i].validity == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    vector &lt;int&gt; temp;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    temp.push_back(regions[i].min_x);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    temp.push_back(regions[i].min_y);     </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    temp.push_back(regions[i].max_x);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    temp.push_back(regions[i].max_y);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    pts.push_back(temp);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="comment">//      rectangle(outputImg, Point(regions[i].min_x, regions[i].min_y), Point(regions[i].max_x, regions[i].max_y), Scalar(0, 0, 255));</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;}</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;\endcode</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;The first line, with the fuction, findNeighbors(),</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="keywordtype">bool</span> checkNeighbors(ODSelectiveSearchModel a, ODSelectiveSearchModel b)</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;{</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="keywordflow">if</span>( </div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    ((a.min_x &lt; b.min_x) and (b.min_x &lt; a.max_x) and (a.min_y &lt; b.min_y) and (b.min_y &lt; a.max_y))</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    or</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    ((a.min_x &lt; b.max_x) and (b.max_x &lt; a.max_x) and (a.min_y &lt; b.max_y) and (b.max_y &lt; a.max_y)) </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    or</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    ((a.min_x &lt; b.min_x) and (b.min_x &lt; a.max_x) and (a.min_y &lt; b.max_y) and (b.max_y &lt; a.max_y)) </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    or</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    ((a.min_x &lt; b.max_x) and (b.min_x &lt; a.max_x) and (a.min_y &lt; b.max_y) and (b.max_y &lt; a.max_y))</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  )</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  }</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;}</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;vector &lt; vector &lt;int&gt; &gt; findNeighbors(ODSelectiveSearchModel regions[], <span class="keywordtype">int</span> total_masks, Mat regionMask, vector &lt; vector &lt;int&gt; &gt; sp)</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;{</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  vector &lt; vector &lt;int&gt; &gt; neighbors;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  vector &lt;int&gt; rows;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  rows.push_back(0);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  rows.push_back(0);</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="keywordtype">int</span> num = 0;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; total_masks-1; i++)</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = i+1; j &lt; i+20; j++)</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    {</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      <span class="keywordflow">if</span>(j&lt;total_masks-2)</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      {</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        <span class="keywordflow">if</span>(checkNeighbors(regions[i], regions[j]) and regions[i].validity == <span class="keyword">true</span> and regions[j].validity == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        { </div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;          rows[0] = i;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;          rows[1] = j;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;          neighbors.push_back(rows);</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        }</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  }</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="keywordflow">return</span> neighbors;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;}</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;\endcode</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;For every region, its just next region is foundout and then it is stored as a pair in vector neighbors.</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;Then, in the loop, </div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;vector &lt;float&gt; similarities;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;sp_neighbors.size(); i++)</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;{</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="keywordtype">float</span> sim = calcSimilarities(regions[sp_neighbors[i][0]],regions[sp_neighbors[i][1]], spSize);  </div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment">//      cout &lt;&lt; i &lt;&lt; &quot;    &quot; &lt;&lt; sp_neighbors[i][0] &lt;&lt; &quot; &quot; &lt;&lt; sp_neighbors[i][1] &lt;&lt; &quot;    &quot; &lt;&lt; sim &lt;&lt; endl;</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  similarities.push_back(sim);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;}</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;\endcode</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;For every region, similarities are calculated <span class="keywordflow">for</span> every neighbor <span class="keyword">using</span> the <span class="keyword">function</span> below,</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="keywordtype">float</span> calcSimilarities(ODSelectiveSearchModel a, ODSelectiveSearchModel b, <span class="keywordtype">float</span> spSize)</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;{</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="keywordtype">double</span> sim = 0.0;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  sim += compareHist( a.xx_hist, b.xx_hist, 1); </div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  sim += compareHist( a.xy_hist, b.xy_hist, 1); </div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  sim += compareHist( a.yy_hist, b.yy_hist, 1); </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  sim += compareHist( a.orientation_image_hist, b.orientation_image_hist, 1); </div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  sim += compareHist( a.differential_excitation_hist, b.differential_excitation_hist, 1); </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  sim += compareHist( a.color_hist, b.color_hist, 1);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  sim += 100 * ((a.size + b.size)/spSize);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <span class="keywordtype">double</span> bbsize = ((max(a.max_x, b.max_x) - min(a.min_x, b.min_x))* (max(a.max_y, b.max_y) - min(a.min_y, b.min_y)) );</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  sim += 100*((bbsize - a.size - b.size) / spSize);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="keywordflow">return</span> sim;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;}</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;\endcode</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;Two regions are close <span class="keywordflow">if</span> the similarity measure is less.</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;value = min_element(similarities.begin(), similarities.end()) - similarities.begin();</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;\endcode</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;The region with closest( minimum) value are then merged,</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="keywordtype">void</span> mergeRegions(<span class="keywordtype">int</span> value, ODSelectiveSearchModel regions[], vector &lt; vector &lt;int&gt; &gt; sp_neighbors, Mat grayMask, vector &lt; vector &lt;int&gt; &gt; sp, <span class="keywordtype">int</span> minRegionSize, <span class="keywordtype">int</span> histSize, <span class="keywordtype">float</span> hist_range_min, <span class="keywordtype">float</span> hist_range_max)</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;{</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  regions[sp_neighbors[value][0]].validity = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  regions[sp_neighbors[value][1]].validity = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  regions[sp_neighbors[value][0]].min_x = min(regions[sp_neighbors[value][0]].min_x, regions[sp_neighbors[value][1]].min_x);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  regions[sp_neighbors[value][0]].max_y = max(regions[sp_neighbors[value][0]].max_y, regions[sp_neighbors[value][1]].max_y);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  regions[sp_neighbors[value][0]].min_x = min(regions[sp_neighbors[value][0]].min_x, regions[sp_neighbors[value][1]].min_x);</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  regions[sp_neighbors[value][0]].max_y = max(regions[sp_neighbors[value][0]].max_y, regions[sp_neighbors[value][1]].max_y);</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  regions[sp_neighbors[value][0]].size = regions[sp_neighbors[value][0]].size + regions[sp_neighbors[value][1]].size;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  Mat regionMask = grayMask.clone();</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <span class="keywordtype">int</span> i = sp_neighbors[value][0];</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = 0; r &lt; sp.size(); r++)</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  {</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; sp[0].size(); c++)</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    {</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <span class="keywordflow">if</span>(sp[r][c] != i)</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        regionMask.at&lt;uchar&gt;(r,c) = 0;</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    }</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  }</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <span class="keywordflow">if</span>(regions[i].size&lt;minRegionSize)</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    regions[i].validity = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<span class="comment">//  cout &lt;&lt; i &lt;&lt; &quot; hessian &quot; &lt;&lt; regionMask.channels() &lt;&lt; endl;</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <span class="comment">//Hessian Matrix</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  regions[i].xx_hist = get_hess_hist_xx(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  regions[i].xy_hist = get_hess_hist_xy(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  regions[i].yy_hist = get_hess_hist_yy(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="comment">//  cout &lt;&lt; i &lt;&lt; &quot; orien&quot; &lt;&lt; endl;</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="comment">//orientation Matrix</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  regions[i].orientation_image_hist = get_orientation_hist(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="comment">//  cout &lt;&lt; i &lt;&lt; &quot; diff&quot; &lt;&lt; endl;</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="comment">//Differential Excitation Matrix</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  regions[i].differential_excitation_hist = get_diff_exci_hist(regionMask, histSize, hist_range_min, hist_range_max);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="comment">//  cout &lt;&lt; i &lt;&lt; &quot; color&quot; &lt;&lt; endl;</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="comment">//Color Histogram</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="keywordtype">float</span> range[] = { hist_range_min, hist_range_max } ;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span>* histRange = { range };</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <span class="keywordtype">bool</span> uniform = <span class="keyword">true</span>; <span class="keywordtype">bool</span> accumulate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  calcHist(&amp;grayMask, 1, 0, Mat(), regions[i].color_hist, 1, &amp;histSize, &amp;histRange, uniform, accumulate );</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;}</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;\endcode</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;Thus <span class="keyword">this</span> merging, calculating features, and scanning <span class="keywordflow">for</span> <span class="keyword">new</span> neighbors is continued till <span class="keywordflow">while</span> loop continues. The result( all ROIs) is stored in file region_of_interests.txt in the folder example/objectdetector/Localization_Images</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;**This selective search algo takes around 20-25 seconds to calculate bounding boxes with the parameters set in the example**</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;Happy Coding!!! </div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;\n </div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;Commit 3 {#commit3}</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;===</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;This commit, [link to commit:CNN_GPU branch added successfully](https:<span class="comment">//github.com/abhi-kumar/opendetection/commit/10dea203378cb5c2ae16ca25552e423422e33690), was issued to add cnn-caffe based applications, for gpu based systems along with cpu based systems,. The commit had changes into 17 files, of which we have talked about most of them in previous commit documentation. Its a combination of set of commits made earler, put here together for better explanation of each of them. </span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;The major addition was to implement mode selector on the basis of mode of compilation of library,</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;\code{.cpp}</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="preprocessor">#if(WITH_GPU)</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="preprocessor"></span>Caffe::SetDevice(0);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;Caffe::set_mode(Caffe::GPU);</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="preprocessor"></span>Caffe::set_mode(Caffe::CPU);</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;<span class="preprocessor"></span>\endcode</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;Thus <span class="keyword">this</span> commit was essential to make sure the library compiled on both cpu and gpu based systems.</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;Happy Coding!!!</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;\n </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;Commit 4 {#commit4}</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;===</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;This commit, [link to commit:Modified examples by removing framegenerator header](examples/objectdetector/od_cnn_mnist_classification.cpp), was issued to make sure caffe libraries and vtk libraries didn<span class="stringliteral">&#39;t clash while running examples on gpu based systems. The commit had changes into 4 files.</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="stringliteral">In all the files, the line which included,</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="stringliteral">#include &quot;common/utils/ODFrameGenerator.h&quot;</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="stringliteral">was erased out, and the issue was marked resolved.</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="stringliteral">Happy Coding!!!</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="stringliteral">Commit 5 {#commit5}</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="stringliteral">This commit, [link to commit:Updated Network Design will all essential Layers](https://github.com/abhi-kumar/opendetection/commit/484df2ce77c0104b96f47178c7cf5c43d30c8efd), was issued to complete all the elements left out in the version 1 of ther network-creator.</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="stringliteral">**The new layers added were**</span></div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="stringliteral">1) Loss Layers:</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="stringliteral">  - Hinge Loss Layer</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="stringliteral">  - Contrastive Loss Layer</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="stringliteral">  - Eucledean Loss Layer</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<span class="stringliteral">  - Multinomial Logistig Loss Layer</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="stringliteral">  - Sigmoid Cross Entropy Loss Layer</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="stringliteral">2) Data and Extra Layers:</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;<span class="stringliteral">  - Maximum Argument (ArgMAx) Layer</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="stringliteral">  - Binomial Normal Log Likelihood (BNLL) Layer</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="stringliteral">  - Element wise operation (Eltwise) Layer</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="stringliteral">  - Image Data Layer</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="stringliteral">  - LMDB/LEVELDB Data Layer</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="stringliteral">These additions almost included all the required layers in caffe, the left out HDF Data layer was added later.</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="stringliteral">Happy Coding!!!</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="stringliteral">Commit 6 {#commit6}</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="stringliteral">This commit, [link to commit:AAM Classification example added](https://github.com/abhi-kumar/opendetection/commit/20d1fbf8abc00fcaad2c6067240e2eea758f7cdd), was issued to add one of my personal researches. This commit included a prediction of Active Appearance Mocel Points on face using Convolutional Neural Networks. Very few works exist on this end, and hence the purpose behind taking up the research. This is a very crude and preliminary model of the research, just for the young users to be encouraged as to the extent to which cnn may work and how opendetection algorithm would help facilitate the same.</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="stringliteral">To understand AAM facial points, please refer [link](http://arxiv.org/abs/1410.1037)</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="stringliteral">The dataset was obtained from [link](https://www.kaggle.com/c/facial-keypoints-detection/data)</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="stringliteral">The dataset was trained on the network,</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="stringliteral">\code{.prototxt}</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="stringliteral">name: &quot;multiple_output&quot;</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;<span class="stringliteral">input: &quot;data&quot;</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="stringliteral">input_shape {</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;<span class="stringliteral">  dim: 1</span></div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="stringliteral">  dim: 3</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="stringliteral">  dim: 96</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="stringliteral">  dim: 96</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="stringliteral">  name: &quot;conv1&quot;</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="stringliteral">  type: &quot;Convolution&quot;</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="stringliteral">  bottom: &quot;data&quot;</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="stringliteral">  top: &quot;conv1&quot;</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="stringliteral">  param {</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="stringliteral">    lr_mult: 1</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;<span class="stringliteral">  param {</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="stringliteral">    lr_mult: 2</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="stringliteral">  convolution_param {</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="stringliteral">    num_output: 32</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="stringliteral">    pad: 2</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="stringliteral">    kernel_size: 5</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="stringliteral">    stride: 1</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="stringliteral">    weight_filler {</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="stringliteral">      type: &quot;gaussian&quot;</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;<span class="stringliteral">      std: 0.01</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<span class="stringliteral">    bias_filler {</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="stringliteral">      type: &quot;constant&quot;</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;<span class="stringliteral">  name: &quot;pool1&quot;</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="stringliteral">  type: &quot;Pooling&quot;</span></div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="stringliteral">  bottom: &quot;conv1&quot;</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="stringliteral">  top: &quot;pool1&quot;</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;<span class="stringliteral">  pooling_param {</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;<span class="stringliteral">    pool: MAX</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;<span class="stringliteral">    kernel_size: 3</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;<span class="stringliteral">    stride: 2</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<span class="stringliteral">  name: &quot;relu1&quot;</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="stringliteral">  type: &quot;ReLU&quot;</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="stringliteral">  bottom: &quot;pool1&quot;</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="stringliteral">  top: &quot;pool1&quot;</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="stringliteral">  name: &quot;norm1&quot;</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;<span class="stringliteral">  type: &quot;LRN&quot;</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;<span class="stringliteral">  bottom: &quot;pool1&quot;</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;<span class="stringliteral">  top: &quot;norm1&quot;</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="stringliteral">  lrn_param {</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="stringliteral">    local_size: 3</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;<span class="stringliteral">    alpha: 5e-05</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="stringliteral">    beta: 0.75</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;<span class="stringliteral">    norm_region: WITHIN_CHANNEL</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="stringliteral">  name: &quot;conv2&quot;</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="stringliteral">  type: &quot;Convolution&quot;</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="stringliteral">  bottom: &quot;norm1&quot;</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="stringliteral">  top: &quot;conv2&quot;</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="stringliteral">  param {</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="stringliteral">    lr_mult: 1</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="stringliteral">  param {</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="stringliteral">    lr_mult: 2</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="stringliteral">  convolution_param {</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="stringliteral">    num_output: 32</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="stringliteral">    pad: 2</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="stringliteral">    kernel_size: 5</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;<span class="stringliteral">    stride: 1</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="stringliteral">     weight_filler {</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="stringliteral">      type: &quot;gaussian&quot;</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="stringliteral">      std: 0.01</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="stringliteral">    bias_filler {</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="stringliteral">      type: &quot;constant&quot;</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="stringliteral">  name: &quot;relu2&quot;</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;<span class="stringliteral">  type: &quot;ReLU&quot;</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;<span class="stringliteral">  bottom: &quot;conv2&quot;</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;<span class="stringliteral">  top: &quot;conv2&quot;</span></div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;<span class="stringliteral">  name: &quot;pool2&quot;</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;<span class="stringliteral">  type: &quot;Pooling&quot;</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;<span class="stringliteral">  bottom: &quot;conv2&quot;</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;<span class="stringliteral">  top: &quot;pool2&quot;</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;<span class="stringliteral">  pooling_param {</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<span class="stringliteral">    pool: AVE</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;<span class="stringliteral">    kernel_size: 3</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="stringliteral">    stride: 2</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="stringliteral">  name: &quot;norm2&quot;</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="stringliteral">  type: &quot;LRN&quot;</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="stringliteral">  bottom: &quot;pool2&quot;</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="stringliteral">  top: &quot;norm2&quot;</span></div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="stringliteral">  lrn_param {</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="stringliteral">    local_size: 3</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="stringliteral">    alpha: 5e-05</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="stringliteral">    beta: 0.75</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="stringliteral">    norm_region: WITHIN_CHANNEL</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="stringliteral">  name: &quot;conv3&quot;</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="stringliteral">  type: &quot;Convolution&quot;</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="stringliteral">  bottom: &quot;norm2&quot;</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="stringliteral">  top: &quot;conv3&quot;</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="stringliteral">  convolution_param {</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="stringliteral">    num_output: 64</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="stringliteral">    pad: 2</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="stringliteral">    kernel_size: 5</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="stringliteral">    stride: 1</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="stringliteral">     weight_filler {</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;<span class="stringliteral">      type: &quot;gaussian&quot;</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="stringliteral">      std: 0.01</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="stringliteral">    bias_filler {</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="stringliteral">      type: &quot;constant&quot;</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="stringliteral">  name: &quot;relu3&quot;</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="stringliteral">  type: &quot;ReLU&quot;</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="stringliteral">  bottom: &quot;conv3&quot;</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="stringliteral">  top: &quot;conv3&quot;</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="stringliteral">  name: &quot;pool3&quot;</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="stringliteral">  type: &quot;Pooling&quot;</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="stringliteral">  bottom: &quot;conv3&quot;</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="stringliteral">  top: &quot;pool3&quot;</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="stringliteral">  pooling_param {</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="stringliteral">    pool: AVE</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="stringliteral">    kernel_size: 3</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="stringliteral">    stride: 2</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="stringliteral">  name: &quot;ip1&quot;</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="stringliteral">  type: &quot;InnerProduct&quot;</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="stringliteral">  bottom: &quot;pool3&quot;</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="stringliteral">  top: &quot;ip1&quot;</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="stringliteral">  param {</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="stringliteral">    lr_mult: 1</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="stringliteral">    decay_mult: 250</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="stringliteral">  param {</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="stringliteral">    lr_mult: 2</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="stringliteral">    decay_mult: 0</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;<span class="stringliteral">  inner_product_param {</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="stringliteral">    num_output: 900</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="stringliteral">     weight_filler {</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="stringliteral">      type: &quot;gaussian&quot;</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;<span class="stringliteral">      std: 0.01</span></div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;<span class="stringliteral">    bias_filler {</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<span class="stringliteral">      type: &quot;constant&quot;</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="stringliteral">  name: &quot;ip2&quot;</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="stringliteral">  type: &quot;InnerProduct&quot;</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="stringliteral">  bottom: &quot;ip1&quot;</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="stringliteral">  top: &quot;ip2&quot;</span></div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<span class="stringliteral">  param {</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="stringliteral">    lr_mult: 1</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<span class="stringliteral">    decay_mult: 250</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="stringliteral">  param {</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="stringliteral">    lr_mult: 2</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="stringliteral">    decay_mult: 0</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="stringliteral">  inner_product_param {</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;<span class="stringliteral">    num_output: 30</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="stringliteral">     weight_filler {</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="stringliteral">      type: &quot;gaussian&quot;</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="stringliteral">      std: 0.01</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="stringliteral">    bias_filler {</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;<span class="stringliteral">      type: &quot;constant&quot;</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="stringliteral"># ----------------------------------------------------------------</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;<span class="stringliteral"># ----------------- Multi-label Loss Function  -------------------</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="stringliteral"># ----------------------------------------------------------------</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="stringliteral">layer {</span></div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="stringliteral">  name: &quot;prob&quot;</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="stringliteral">  type: &quot;Sigmoid&quot;</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="stringliteral">  bottom: &quot;ip2&quot;</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="stringliteral">  top: &quot;prob&quot;</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="stringliteral">**Here When cpp version based elements of caffe library were used, the output produced extremely deviant results from the one obtained using python wrapper of caffe**</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="stringliteral">The cpp version add the following function into detectors/global2D/detection/ODConvClassification.cpp,</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="stringliteral">std::vector&lt;float&gt; ODConvClassification::classifyMultiLabel()</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="stringliteral">  #if(WITH_GPU)</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="stringliteral">  Caffe::SetDevice(0);</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="stringliteral">  Caffe::set_mode(Caffe::GPU);</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="stringliteral">  #else</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="stringliteral">  Caffe::set_mode(Caffe::CPU);</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="stringliteral">  #endif</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="stringliteral">  Net&lt;float&gt;  net(networkFileLocation, TEST);</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="stringliteral">  net.CopyTrainedLayersFrom(weightModelFileLoaction); </span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="stringliteral">  float type = 0.0;</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<span class="stringliteral">  const vector&lt;Blob&lt;float&gt;*&gt;&amp; result =  net.Forward(inputBlob, &amp;type);</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="stringliteral">  cout &lt;&lt; endl &lt;&lt; &quot;****** OUTPUT *******&quot; &lt;&lt; endl;</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;<span class="stringliteral">  Blob&lt;float&gt;* output_layer = net.output_blobs()[0];</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="stringliteral">  const float* begin = output_layer-&gt;cpu_data();</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="stringliteral">  const float* end = begin + output_layer-&gt;channels();</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="stringliteral">  return std::vector&lt;float&gt;(begin, end);</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="stringliteral">std::vector&lt;float&gt; ODConvClassification::runMultiClassClassifier()</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="stringliteral">  #if(WITH_GPU)</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;<span class="stringliteral">  Caffe::SetDevice(0);</span></div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="stringliteral">  Caffe::set_mode(Caffe::GPU);</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="stringliteral">  #else</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;<span class="stringliteral">  Caffe::set_mode(Caffe::CPU);</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="stringliteral">  #endif</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="stringliteral">  /* Load the network. */</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;<span class="stringliteral">  Net&lt;float&gt;  net_m(networkFileLocation, TEST);</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;<span class="stringliteral">  net_m.CopyTrainedLayersFrom(weightModelFileLoaction);</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="stringliteral">  Blob&lt;float&gt;* input_layer = net_m.input_blobs()[0];</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="stringliteral">  num_channels_ = input_layer-&gt;channels();</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="stringliteral">  input_geometry_ = cv::Size(input_layer-&gt;width(), input_layer-&gt;height());</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="stringliteral">  input_layer-&gt;Reshape(1, num_channels_,</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;<span class="stringliteral">         input_geometry_.height, input_geometry_.width);</span></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;<span class="stringliteral">  net_m.Reshape();</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<span class="stringliteral">  std::vector&lt;cv::Mat&gt; input_channels;</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="stringliteral">  int width = input_layer-&gt;width();</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;<span class="stringliteral">  int height = input_layer-&gt;height();</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;<span class="stringliteral">  float* input_data = input_layer-&gt;mutable_cpu_data();</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;<span class="stringliteral">  for (int i = 0; i &lt; input_layer-&gt;channels(); ++i) </span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;<span class="stringliteral">    cv::Mat channel(height, width, CV_32FC1, input_data);</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="stringliteral">    input_channels.push_back(channel);</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="stringliteral">    input_data += width * height;</span></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;<span class="stringliteral">//      net_m.Forward();   # for newer versions of caffe</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;<span class="stringliteral">  Blob&lt;float&gt;* output_layer = net_m.output_blobs()[0];</span></div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;<span class="stringliteral">  const float* begin = output_layer-&gt;cpu_data();</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="stringliteral">  const float* end = begin + output_layer-&gt;channels();</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="stringliteral">  return std::vector&lt;float&gt;(begin, end);</span></div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;<span class="stringliteral">\endcode </span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;<span class="stringliteral">**The issue was that irrespective of the input, the output remained same. This issues still unresolved**</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;<span class="stringliteral">As a temporary resolt, the following python wrapper was called,</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="stringliteral">import numpy as np</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;<span class="stringliteral">import caffe</span></div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="stringliteral">import sys</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="stringliteral">import cv2</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;<span class="stringliteral">if(sys.argv[5] == &quot;gpu&quot;):</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;<span class="stringliteral">  caffe.set_mode_gpu()</span></div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="stringliteral">  caffe.set_device(0)</span></div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;<span class="stringliteral">else:</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;<span class="stringliteral">  caffe.set_mode_cpu()</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="stringliteral">net = caffe.Net(sys.argv[1], sys.argv[2], caffe.TEST)</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="stringliteral">transformer = caffe.io.Transformer({&#39;</span>data<span class="stringliteral">&#39;: net.blobs[&#39;</span>data<span class="stringliteral">&#39;].data.shape})</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="stringliteral">transformer.set_transpose(&#39;</span>data<span class="stringliteral">&#39;,(2,0,1))</span></div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="stringliteral">img = caffe.io.load_image (sys.argv[3])</span></div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="stringliteral">net.blobs[&#39;</span>data<span class="stringliteral">&#39;].data[...] = transformer.preprocess(&#39;</span>data<span class="stringliteral">&#39;, img)</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="stringliteral">out = net.forward ()</span></div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="stringliteral">predicts = out[&#39;</span>prob<span class="stringliteral">&#39;]</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="stringliteral">print &quot;Predicted label:&quot;</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="stringliteral">predicts = predicts*255</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="stringliteral">print predicts[0]</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;<span class="stringliteral">img = cv2.imread(sys.argv[3])</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="stringliteral">f = open(sys.argv[4],&#39;</span>w<span class="stringliteral">&#39;)</span></div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="stringliteral">for i in range(15):</span></div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="stringliteral">  x = (predicts[0][2*i])</span></div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;<span class="stringliteral">  y = (predicts[0][2*i+1])</span></div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="stringliteral">  x = int(x)</span></div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="stringliteral">  y = int(y)</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="stringliteral">  cv2.circle(img, (x,y), 1, (255,255,255), 2, 8, 0)</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="stringliteral">  stringVal = str(x) + &quot; &quot; + str(y)</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="stringliteral">  f.write(stringVal)</span></div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="stringliteral">  f.write(&#39;</span>\n<span class="stringliteral">&#39;)</span></div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="stringliteral">cv2.imshow(&quot;img&quot;, img)</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="stringliteral">cv2.waitKey(0)</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;<span class="stringliteral">This wrapper code was called from the function of ODConvClassification,</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;<span class="stringliteral">void ODConvClassification::runMultiClassClassifierPythonMode()</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;<span class="stringliteral">  string mode = &quot;&quot;;</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;<span class="stringliteral">  #if(WITH_GPU)</span></div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;<span class="stringliteral">  mode = &quot;gpu&quot;;</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;<span class="stringliteral">  #else</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;<span class="stringliteral">  mode = &quot;cpu&quot;;</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;<span class="stringliteral">  #endif</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;<span class="stringliteral">  string cmd = &quot;python ../examples/objectdetector/AAM_Classify/classify.py &quot; + networkFileLocation + &quot; &quot; + weightModelFileLoaction + &quot; &quot; + imageFileLocation + &quot; &quot; + outputFileLocation + &quot; &quot; + mode;</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="stringliteral">  system(cmd.c_str());</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="stringliteral">The calling was done using system() function.</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="stringliteral">The example, examples/objectdetector/od_cnn_aam_classification_python_mode.cpp, like the mnist classify example has user help option present. The detected points are posted to a file &quot;output.txt&quot;, which is stored in the folder, examples/objectdetector/AAM_Classify.</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<span class="stringliteral">Happy Coding!!!</span></div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;<span class="stringliteral">Commit 7 {#commit7}</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<span class="stringliteral">This commit, [link to commit:Annotator Version 1 Added](https://github.com/abhi-kumar/opendetection/commit/e4c931112f1047a8f81695d30f1f81620eb54f67), was issued in order to introduce a image annotation tool. Annotation tool is supposed to be very important part of object detection. Almost every cnn based object detection training and classification involves annotation of the datatset. If it is included in the library itself then the users work of fetching annotator from outside would be cleared off.</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;<span class="stringliteral">7.1) Features and usage of the version 1 of the annotator {#commit7_first}</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;<span class="stringliteral">The features and some usage points involved are:</span></div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;<span class="stringliteral">  - User may load a single image from a location using the &quot;Select the image location&quot; button or the user may point towards a complete image dataset folder.</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;<span class="stringliteral">  - Even if the user points to a dataset folder, there exists an option of choosing an image from some another location while the annotation process is still on.</span></div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;<span class="stringliteral">  - Even if user selects a single image, the user may load more single images without changing the type of annotation.</span></div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<span class="stringliteral">  - The first type of annotation facility is, annotating one bounding box per image.</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;<span class="stringliteral">  - The second, annotating and cropping one bounding box per image.</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;<span class="stringliteral">  - The third one, annotating multiple bounding boxes per image, with attached labels.</span></div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;<span class="stringliteral">  - If a user makes mistake in annotation, the annotation can be reset too.</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;<span class="stringliteral">**Note: Every image that is loaded, is resized to 640x480 dimensions, but the output file has points of the bounding boxes as the original image size**</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="stringliteral">The output files generated in the three cases have annotation details as,</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="stringliteral">  - First case, every line in the output text file has a image name followed by four points x1 y2 x2 y2, first two representing top left coordinate of the box and the last two representing bottom right coordinates of the box.</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="stringliteral">  - Second case, every line in the output text file has a image name followed by four points x1 y2 x2 y2, first two representing top left coordinate of the box and the last two representing bottom right coordinates of the box. The cropped images are stored in the same folder as the original image, with name, &lt;original_image_name&gt;_cropped.&lt;extension_of_the_original_image&gt; </span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="stringliteral">  - Third case, every line in the output text file has a image name followed by a lebel and then the four points x1 y2 x2 y2, first two representing top left coordinate of the box and the last two representing bottom right coordinates of the box. If there are multiple bounding boxes, then after image name there is a label, then four points, followed another label, and the corresponding four points and so on.</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="stringliteral">To select any of these cases, select the image/dataset and then press the &quot;Load the image&quot; button.</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="stringliteral">**First case usage**</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;<span class="stringliteral">  - Select the image or the dataset folder.</span></div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;<span class="stringliteral">  - Press the &quot;Load the image&quot; button. </span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;<span class="stringliteral">  - To create any roi, first left click on top left point of the supposed roi and then right click on the bottom right point of the supposed roi. A green rectangular box will appear.</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;<span class="stringliteral">  - Now, if its not the one you meant it, please click &quot;Reset Markings&quot; Button and repoint the new roi.</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;<span class="stringliteral">  - If the ROI is fine, press &quot;Select the ROI&quot; button.</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<span class="stringliteral">  - Now, load another image or save the file.</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;<span class="stringliteral">**Second case usage**</span></div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="stringliteral">  - Select the image or the dataset folder.</span></div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="stringliteral">  - Press the &quot;Load the image&quot; button. </span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="stringliteral">  - To create any roi, first left click on top left point of the supposed roi and then right click on the bottom right point of the supposed roi. A green rectangular box will appear.</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="stringliteral">  - Now, if its not the one you meant it, please click &quot;Reset Markings&quot; Button and repoint the new roi.</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;<span class="stringliteral">  - If the ROI is fine, press &quot;Select the ROI&quot; button.</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;<span class="stringliteral">  - Now, load another image or save the file.</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;<span class="stringliteral">**Third case usage**</span></div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="stringliteral">  - Select the image or the dataset folder.</span></div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="stringliteral">  - Press the &quot;Load the image&quot; button. </span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;<span class="stringliteral">  - To create any roi, first left click on top left point of the supposed roi and then right click on the bottom right point of the supposed roi. A green rectangular box will appear.</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="stringliteral">  - Now, if its not the one you meant it, please click &quot;Reset Markings&quot; Button and repoint the new roi.</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;<span class="stringliteral">  - If the ROI is fine, please type an **integer** label in the text box and press &quot;Select the ROI&quot; button.</span></div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;<span class="stringliteral">  - Now, you may draw another roi, or load another image, save the file. </span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;<span class="stringliteral">**Note: In the third case, the one with multiple ROIs per image, if a boundix box is selected for an image and you are trying to make another and press the reset button, the selected roi will not be deleted. Any selected roi cannot be deleted as of now.**</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="stringliteral"> </span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="stringliteral">7.2) Annotation base class {#commit7_second}</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;<span class="stringliteral">The base class for the annotator tool is &quot;annotation&quot; presented in the files detectors/global2D/annotation/ODAnnotation.cpp and detectors/global2D/annotation/ODAnnotation.h. It has already been stated as to how the base elements, buttons, text boxes, labels, grids, dropdown menus, etc are implemented. In this commit, for the annotator, the new stuffs were mouse_click_event and selecting folder/file. The view showing rectangular ROIs and croppings are done using OpenCV libraries.</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;<span class="stringliteral">**Mouse Click Events**</span></div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;<span class="stringliteral">The on_vbutton_pree function from the file detectors/global2D/annotation/ODAnnotation_imageLoadWindow.h sums up the mouse events,</span></div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;<span class="stringliteral">bool annotation::on_button_press_event(GdkEventButton *event)</span></div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;<span class="stringliteral">  // Check if the event is a left button click.</span></div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="stringliteral">  if (event-&gt;button == 1)</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="stringliteral">    // Memorize pointer position</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="stringliteral">    lastXMouse=event-&gt;x;</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="stringliteral">    lastYMouse=event-&gt;y;</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<span class="stringliteral">    xPressed=event-&gt;x;</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="stringliteral">    yPressed=event-&gt;y;</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="stringliteral">    // Start moving the view</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;<span class="stringliteral">    moveFlag=true;</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="stringliteral">    // Event has been handled</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;<span class="stringliteral">    cout &lt;&lt; lastXMouse &lt;&lt; &quot; &quot; &lt;&lt; lastYMouse &lt;&lt; endl;</span></div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;<span class="stringliteral">    return true;</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="stringliteral">  } </span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;<span class="stringliteral">  // Check if the event is a right button click.</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;<span class="stringliteral">  if(event-&gt;button == 3)</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;<span class="stringliteral">    // Memorize mouse coordinates</span></div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;<span class="stringliteral">    lastXMouse=event-&gt;x;</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;<span class="stringliteral">    lastYMouse=event-&gt;y;</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;<span class="stringliteral">    xReleased=event-&gt;x;</span></div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;<span class="stringliteral">    yReleased=event-&gt;y;</span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;<span class="stringliteral">    createVisualROI(xPressed-10, yPressed-35, xReleased-10, yReleased-35);</span></div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;<span class="stringliteral">    // Display the popup menu</span></div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;<span class="stringliteral">//    m_Menu_Popup.popup(event-&gt;button, event-&gt;time);</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;<span class="stringliteral">    // The event has been handled.</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;<span class="stringliteral">    return true;</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;<span class="stringliteral">  return false;</span></div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;<span class="stringliteral">**Selecting a file/folder**</span></div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;<span class="stringliteral">With gtkmm, a file chooser can be created using the function below,</span></div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;<span class="stringliteral">Gtk::FileChooserDialog dialog(&quot;Please choose a file&quot;,Gtk::FILE_CHOOSER_ACTION_OPEN);</span></div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="stringliteral">dialog.set_transient_for(*this);</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="stringliteral">//Add response buttons the the dialog:</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;<span class="stringliteral">dialog.add_button(&quot;_Cancel&quot;, Gtk::RESPONSE_CANCEL);</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;<span class="stringliteral">dialog.add_button(&quot;_Open&quot;, Gtk::RESPONSE_OK);</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;<span class="stringliteral">//Add filters, so that only certain file types can be selected:</span></div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;<span class="stringliteral">Glib::RefPtr&lt;Gtk::FileFilter&gt; filter_any = Gtk::FileFilter::create();</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;<span class="stringliteral">filter_any-&gt;set_name(&quot;Any files&quot;);</span></div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;<span class="stringliteral">filter_any-&gt;add_pattern(&quot;*&quot;);</span></div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;<span class="stringliteral">dialog.add_filter(filter_any);</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;<span class="stringliteral">Glib::RefPtr&lt;Gtk::FileFilter&gt; filter_text = Gtk::FileFilter::create();</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;<span class="stringliteral">filter_text-&gt;set_name(&quot;Text files&quot;);</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;<span class="stringliteral">filter_text-&gt;add_mime_type(&quot;text/plain&quot;);</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;<span class="stringliteral">dialog.add_filter(filter_text);</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;<span class="stringliteral">Glib::RefPtr&lt;Gtk::FileFilter&gt; filter_cpp = Gtk::FileFilter::create();</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;<span class="stringliteral">filter_cpp-&gt;set_name(&quot;C/C++ files&quot;);</span></div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;<span class="stringliteral">filter_cpp-&gt;add_mime_type(&quot;text/x-c&quot;);</span></div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;<span class="stringliteral">filter_cpp-&gt;add_mime_type(&quot;text/x-c++&quot;);</span></div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;<span class="stringliteral">filter_cpp-&gt;add_mime_type(&quot;text/x-c-header&quot;);</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;<span class="stringliteral">dialog.add_filter(filter_cpp);</span></div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;<span class="stringliteral">//Show the dialog and wait for a user response:</span></div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;<span class="stringliteral">int result = dialog.run();</span></div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="stringliteral">//Handle the response:</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="stringliteral">switch(result)</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;<span class="stringliteral">  case(Gtk::RESPONSE_OK):</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;<span class="stringliteral">    // The user selected a file</span></div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="stringliteral">    std::cout &lt;&lt; &quot;Open clicked.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="stringliteral">    filename = dialog.get_filename();</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="stringliteral">    std::cout &lt;&lt; &quot;File selected: &quot; &lt;&lt;  filename &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="stringliteral">    break;</span></div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;<span class="stringliteral">  case(Gtk::RESPONSE_CANCEL):</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="stringliteral">    // The user clicked cancel</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;<span class="stringliteral">    std::cout &lt;&lt; &quot;Cancel clicked.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="stringliteral">    break;</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;<span class="stringliteral">  default:</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="stringliteral">  {</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="stringliteral">    // The user closed the dialog box</span></div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="stringliteral">    std::cout &lt;&lt; &quot;Unexpected button clicked.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;<span class="stringliteral">    break;</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;<span class="stringliteral">  }</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;<span class="stringliteral">A similar code can be used to select a folder, with a slight change in the event as shown below,</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="stringliteral">Gtk::FileChooserDialog dialog(&quot;Please choose a file&quot;,Gtk::FILE_CHOOSER_ACTION_SELECT_FOLDER);</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;<span class="stringliteral">7.3)Upper Annotator Class {#commit7_third}</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="stringliteral">The ODAnnotator Class invokes the gtkmm object of class annotation, from files detectors/global2D/annotation/ODAnnotator.cpp and detectors/global2D/annotation/ODAnnotator.h. This ODAnnotator class is derived from public elements of ODTrainer class. The invoking is done as,</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="stringliteral">void ODAnnotator::startAnnotator(int argc, char *argv[])</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="stringliteral">  auto app = Gtk::Application::create(argc, argv, &quot;org.gtkmm.example&quot;);</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="stringliteral">  annotation Annotation;</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="stringliteral">  Annotation.set_default_geometry (10000, 10000);</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="stringliteral">  app-&gt;run(Annotation);</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="stringliteral">The object of ODAnnotator class is created in the example, examples/objectdetector/od_image_annotator.cpp.</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;<span class="stringliteral">Commit 8 {#commit8}</span></div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;<span class="stringliteral">This commit, [link to commit:HDF5 Layer added to network creator](https://github.com/abhi-kumar/opendetection/commit/872cd3271d0d372437155eece729f757abec157f), was issued to add HDF5 data layer to the network creator. Many researchers have the habit of using data in HDF5 format and is currently supported by the caffe library. The commit mentioned changes in two files and this layer was added to the extraLayer type layers.</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;<span class="stringliteral">Commit 9 {#commit9}</span></div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;<span class="stringliteral">This commit, [link to commit:Saving mode added to network-creator](https://github.com/abhi-kumar/opendetection/commit/3001f4f920d36e9fd4b52870aa50e144406bb121), was issued to rectify the issue that, while saving the layers from network creator, nothing was being actually written to the file. The commit marked changes in one file, detectors/global2D/training/network.cpp.</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;<span class="stringliteral">The following was added to the function where button which saved the file was pressed,</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;<span class="stringliteral">for(int i = 0; i &lt; numLayers; i++)</span></div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;<span class="stringliteral">  myfile &lt;&lt; fullCnnLayers[i]; </span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;<span class="stringliteral">Commit 10 {#commit10}</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="stringliteral">This commit, [link to commit:Delete a particular layer, earlier it was only last layer to be deleted](https://github.com/abhi-kumar/opendetection/commit/2d23a32ca381de52b53bcf6c5bff6fa741763ed5), was issued to rectify the issue that, the network creator only facilitated deletion of only the latest created layer. It caused difficulties such that a user who might want to delete the second layer had to technically delete the entire network. Thus, this commit, with changes in 6 files resolved the issue.</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;<span class="stringliteral">10.1) How to delete a particular layer in network creator {#commit10_first}</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;<span class="stringliteral">This can be done, while displaying the network in the display window, below the textview there will be a dropdown list. The list has the name of the layers that have been pushed into the network. Select the layer, and press the button &quot;Delete Selected Layer&quot;. Immediate changes will appear on the display window text view space.</span></div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="stringliteral">The dropdown list is designed in a way that its dynamic to the situation. Once the layer is deleted, its presence from the dropdown list also vanishes,</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="stringliteral">ref_currentLayers-&gt;clear();</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;<span class="stringliteral">combo_currentLayers.set_model(ref_currentLayers);</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;<span class="stringliteral">Gtk::TreeModel::Row row_currentLayers = *(ref_currentLayers-&gt;append());</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;<span class="stringliteral">row_currentLayers[column_currentLayers.m_col_id] = 0;</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;<span class="stringliteral">row_currentLayers[column_currentLayers.m_col_name] = &quot;Layers&quot;;</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;<span class="stringliteral">row_currentLayers[column_currentLayers.m_col_extra] = &quot;All Layers&quot;;</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;<span class="stringliteral">combo_currentLayers.set_active(row_currentLayers);</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="stringliteral">for(int i = 0; i &lt; numLayers; i++)</span></div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="stringliteral">  Gtk::TreeModel::Row row_currentLayers = *(ref_currentLayers-&gt;append());</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="stringliteral">  row_currentLayers[column_currentLayers.m_col_id] = i + 1;</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="stringliteral">  row_currentLayers[column_currentLayers.m_col_name] = fullCnnLayersName[i];</span></div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;<span class="stringliteral">The dynamic nature is obtained by the code snippet above added to the file detectors/global2D/training/displayWindow.h.</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;<span class="stringliteral">The pointer and the handle to select a particular layer, append to network, delete particular layers has been brought down by,</span></div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;<span class="stringliteral">struct Node {</span></div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;<span class="stringliteral">    Glib::ustring data;</span></div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;<span class="stringliteral">  Glib::ustring name;</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;<span class="stringliteral">    Node* nextLayer;</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;<span class="stringliteral">};</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="stringliteral">adding the name section, a type of id, to each layer. Thus all the functions, involving the linkedlist in the file detectors/global2D/training/node.h had to be simultaneously changed.</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;<span class="stringliteral"> </span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;<span class="stringliteral">Commit 11 {#commit11}</span></div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;<span class="stringliteral">This commit, [link to commit:Now layers in network creator can be inserted in between layers too](https://github.com/abhi-kumar/opendetection/commit/5407fce78a474d06e22277ec7c185f432ee389bf), was issued to add a new important feature to the network creator. It is quite common while experimenting with cnn that, researchers want to insert a layer in betweem two layers, thus to enable this feature four files have been modified in this commit.</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;<span class="stringliteral">11.1) Using the feature of adding layers in between already created layers in network creator{#commit11_first}</span></div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;<span class="stringliteral">The pointer to unique id/name had already been created in the previous commit. To make use of this feature, on the display window, select the layer after which you want a new layer. Then press &quot;Add Layer after Selected Layer&quot; button. Then as normal, select a layer and add it.</span></div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;<span class="stringliteral">**Make sure that only one layer is added**</span></div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;<span class="stringliteral">Commit 12 {#commit12}</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;<span class="stringliteral">This commit, [link to commit:Multiple cropper from same image with labels added](https://github.com/abhi-kumar/opendetection/commit/2472314cb8881afdded02023be1529eaf3a984c9), was issued to add a new important feature to the Annotator. </span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;<span class="stringliteral">12.1) Cropping multiple sections from same image{#commit12_first}</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="stringliteral">With a total of around 200 additions to 4 code source files, this feature would enable user to extract multiple rectangular ROIs from the same same with an attached label with each cropping</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;<span class="stringliteral">  - Select the image or the dataset folder.</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;<span class="stringliteral">  - Press the &quot;Load the image&quot; button. </span></div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;<span class="stringliteral">  - To create any roi, first left click on top left point of the supposed roi and then right click on the bottom right point of the supposed roi. A green rectangular box will appear.</span></div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;<span class="stringliteral">  - Now, if its not the one you meant it, please click &quot;Reset Markings&quot; Button and repoint the new roi.</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;<span class="stringliteral">  - If the ROI is fine, please type an **integer** label in the text box and press &quot;Select the ROI&quot; button.</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;<span class="stringliteral">  - Now, you may draw another roi, or load another image, save the file.</span></div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;<span class="stringliteral">  - Once the file is saved, the cropped images will be saved in the same forlder as the original image with name as &lt;original_image_name&gt;_cropped_&lt;label&gt;_&lt;unique_serial_id&gt;.&lt;extension_of_the_original_image&gt; </span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;<span class="stringliteral">Commit 13 {#commit13}</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;<span class="stringliteral">This commit, [link to commit:With the rectangular boxes demo on images corresponding labels will also be shown](https://github.com/abhi-kumar/opendetection/commit/6ba8bf4dd640e965cfd75d026d5feb2a8aab03a6), was issued to add a new important feature to the Annotator. While annotating with labels on a single image, to enable easeness to the user, labels would also appear with the selected ROIs. This was made possible with </span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="stringliteral">std::string text = text_annotationLabel.get_text();</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;<span class="stringliteral">int fontFace = FONT_HERSHEY_SCRIPT_SIMPLEX;</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;<span class="stringliteral">double fontScale = 1;</span></div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;<span class="stringliteral">int thickness = 2;  </span></div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;<span class="stringliteral">cv::Point textOrg(x1, y1);</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;<span class="stringliteral">cv::putText(img, text, textOrg, fontFace, fontScale, Scalar(0,0,255), thickness,8);</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;<span class="stringliteral">the above snippet in the file detectors/global2D/annotation/ODAnnotation_imageLoadWindow.h, and a few other changes two other files.</span></div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;<span class="stringliteral">Commit 14 {#commit14}</span></div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;<span class="stringliteral">This commit, [link to commit:Segnet classifier python version added](https://github.com/abhi-kumar/opendetection/commit/147823e1d082f45fa41ef38f3718a5843c55465c), was issued to introduce a link to segnet library, a derivative of caffe library. This would allow segnet library users to attach it to opendetection in way as done with caffe library.</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;<span class="stringliteral">To get a better understanding of segnet please refer to [link here](http://mi.eng.cam.ac.uk/projects/segnet/)</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;<span class="stringliteral">This commit shows a python wrapper based example of segmenting an image using Segnet. The trained model, network file, and the image dataset have been incorporated from [link here](http://mi.eng.cam.ac.uk/projects/segnet/tutorial.html)</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;<span class="stringliteral">The reason behind putting a python wrapper code into play is the same issue we had while adding AAM classifier (methioned above the blog). The issue is left unresolved.</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;<span class="stringliteral">The python wrapper is called from ODConvClassification class,</span></div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;<span class="stringliteral">\code{.cpp}</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;<span class="stringliteral">void ODConvClassification::runSegnetBasedClassifierPythonMode()</span></div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;<span class="stringliteral">  string mode = &quot;&quot;;</span></div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="stringliteral">  #if(WITH_GPU)</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="stringliteral">  mode = &quot;gpu&quot;;</span></div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="stringliteral">  #else</span></div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;<span class="stringliteral">  mode = &quot;cpu&quot;;</span></div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;<span class="stringliteral">  #endif</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="stringliteral">  string cmd = &quot;python ../examples/objectdetector/Segnet_Classify/test.py &quot; + segnetLocation + &quot; &quot; + networkFileLocation + &quot; &quot; + weightModelFileLoaction + &quot; &quot; + imageFileLocation + &quot; &quot; + imageGroundTruthFileLocation + &quot; &quot; + colorLocation + &quot; &quot; + mode;</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;<span class="stringliteral">  system(cmd.c_str());</span></div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="stringliteral">\endcode</span></div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;<span class="stringliteral">And the python wrapper is test.py in the folder, examples/objectdetector/Segnet_Classify. This is untimately called out from the file examples/objectdetector/od_cnn_segnet_classification_python_mode.cpp like the amm classifier example.</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;<span class="stringliteral">Commit 15 {#commit15}</span></div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;<span class="stringliteral">This commit, [link to commit:New feature to annotator: Mask(Segnet), or say non-rectangular roi based annotation with attached labels](https://github.com/abhi-kumar/opendetection/commit/5927b27eb28f329b491b539accf75fe3958d127b), was issued to add a new feature to the Annotator.</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;<span class="stringliteral">15.1) Non rectangualr ROI with label using annotator{#commit15_first}</span></div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;<span class="stringliteral">In segnet, and many other places, annotating an object might require a non rectangular ROI to be marked up. This commit enables the user to mark multiple non rectangular ROIs over an image with attached labels.</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;<span class="stringliteral">  - Select the image or the dataset folder.</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="stringliteral">  - Press the &quot;Load the image&quot; button. </span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="stringliteral">  - To create any roi, Click on the points needed only with left click.</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;<span class="stringliteral">  - Now, if its not the one you meant it, please click &quot;Reset Markings&quot; Button and repoint the new roi.</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="stringliteral">  - If the ROI is fine, please type an **integer** label in the text box and press &quot;Select the ROI&quot; button. A gree color marking covering the region and passing through the points you have selected will appear.</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;<span class="stringliteral">  - Now, you may draw another roi, or load another image, save the file. </span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;<span class="stringliteral">  - The output of this file will be saved as filename, followed by an unique id to the ROI, label of the roi, set of points in the roi, then again another id, its label and the points and so on.</span></div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;<span class="stringliteral">This was made feasible with around 300 additions to 4 source code files.</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="stringliteral">Commits 16, 17 and 18 {#commit16_17_18}</span></div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="stringliteral">These commits, were made to add popup messages whenever any event is occured, or user does an error while using thr GUIs, Solver Maker, Network Creator and Annotator.</span></div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;<span class="stringliteral">The links to commits:</span></div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="stringliteral">  - [Commit 16: User oriented message boxes added to solver maker](https://github.com/abhi-kumar/opendetection/commit/c21845efa5ccd3db74e1922173a3383e11418d5c)</span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="stringliteral">  - [Commit 17: User oriented popups added to network creator](https://github.com/abhi-kumar/opendetection/commit/27193588f1b64e100e7154a752f543dc353f834d)</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="stringliteral">  - [Commit 18: Added user oriented popups to Annotator](https://github.com/abhi-kumar/opendetection/commit/0997d5b3a54763541c8478116c0263a7e60c40b7)</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;<span class="stringliteral">\n </span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;<span class="stringliteral">Commit 19{#commit19}</span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="stringliteral">Gsoc Documentation added: [Commit 19: Complete blog with link to commits](https://github.com/abhi-kumar/opendetection/commit/67499c2410da377ea10aa59dea7a4bec8cf8cbd0)</span></div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="stringliteral">The above is a link to show commits which has links to all the commits -&gt; RECURSION LEVEL INFINITE</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;<span class="stringliteral">This marks a pseudo end to the GSOC term.</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;<span class="stringliteral">**Work left to be completed:**</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;<span class="stringliteral">a) Resolve the issue of cpp version of AAM and segnet based classifier</span></div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;<span class="stringliteral">b) Heat map generator using cnn ( will require time as its is quite research intensive part)</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;<span class="stringliteral">\n</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;<span class="stringliteral">Older sections of the blog{#oldBlog}</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;<span class="stringliteral">===</span></div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;<span class="stringliteral">CNN based object localization and recognition for openDetection library  {#gsoc2016_blog_abhishek1}</span></div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;<span class="stringliteral">---</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;<span class="stringliteral">  - [Link to Proposal](https://storage.googleapis.com/summerofcode-prod.appspot.com/gsoc/core_project/doc/1458909012_ProposalGSoC16.pdf?Expires=1463646545&amp;GoogleAccessId=summerofcode-prod%40appspot.gserviceaccount.com&amp;Signature=u8ENsakhMhWcA16h57rY8BzZ9M1NoUOxmRRUSJfSaEjJc%2Fce%2FoknY4K3%2FuQTJI3r0kuJF2P5WcwKYNOJd8zkIo6YDtbqQ5Be%2Bz1jXTbfsUGpN7UvQwElqKlAcAVcKxMPq1KkNpJFzPQhm8tDl9wYyFzoSnV1kLgpBMesbWV3vggt12PFo8IYkbpD4esd%2B9kHK64iNG5AykTJzL0CrMQcPK1a4WLrzBcgS8Dp2z327Ri8W1BtRC1SF4pveEmd6daAuRK3zfVkq8B7NNsvvk7x3QM2lg9WTlrFyTzDNOkp0k0cByusZ5fvZ20eQHbqmsKM8skE7XT0fX98xoiED8bauA%3D%3D) - [Link to GSoC2016 Project Page](https://summerofcode.withgoogle.com/projects/#5234791976796160)</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<span class="stringliteral">**About me**</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;<span class="stringliteral">I am a final year engineering student from India, pursuing Electrical and Electronics Engineering at Bits-Pilani Goa Campus. Since my first year at the college, I have been interested in the fields of Computer Vision, Machine Learning and Artificial Intelligence. I have completed my undergraduate thesis at Research and Division Labs of Tata Elxsi Pvt Ltd, on the topic &quot;Scene-understanding and object classification using neural networks for autonomous robot navigation&quot;. Over the tenure of engineering in the past three and a half years I have worked over a few projects, </span></div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;<span class="stringliteral">  - Using Weber Local Descriptors to match forensics sketeches with their image counterparts</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;<span class="stringliteral">  - Implementing a new course, on biomedical image processing, which is supposed to be added to the college&#39;</span>s academic curriculum</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  - Vehicle detection and tracking</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  - Analysing haar-cascades on face detection application</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;**Project**</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;The project is revolved over integrating <span class="keywordtype">object</span> detection and classification module <span class="keyword">using</span> Convolutional Neural Networks. The following shows the basic components of the work to be completed during the term of Google Summer Of Code, 2016</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  - Implement a way to invoke Caffe open source library from the OpenDetection module with a user-friendly code based way ( <span class="keyword">this</span> will include a tinge of GUI support <span class="keywordflow">for</span> instant access)</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  - Implement open source guidance and codes <span class="keywordflow">for</span> state-of-the art <span class="keywordtype">object</span> localization problems(hypothesis generation) specifically based on selective-search and convolutional neural network (CNN) approaches. </div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  - Adding a ground-truth <a class="code" href="classannotation.html">annotation</a> tool to the module with a graphical-user-interface support. </div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  - Implementing <span class="keywordtype">short</span>, but effective modules like mixed-pooling, recurrent networks to the Convolutional Neural Networks Training dependent on the invoked caffe library. </div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  - Adding context based learning CNNs. </div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  - Adding user-interface to train and test CNN based classifiers and <span class="keywordtype">object</span> detectors.</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  - Adding documentation for the above</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;All the completed and on-going work will be explained in detail here, as the process moves forward.</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;Happy Coding!!!!</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;Classification of digits in Mnist Library using CNN {#target1}</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;---</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;The classification example added to the library involves usage of caffe library. The modalities and usage of the libraries can be studied at</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;  - [Caffe Library](http:<span class="comment">//caffe.berkeleyvision.org/)</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  - [Using Caffe Library](https:<span class="comment">//abhishek4273.com/2016/02/07/ann-chapter-3-deep-learning-using-caffe-python/)</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  - [Branch of OpenDetection <span class="keywordflow">for</span> the below classifier](https:<span class="comment">//github.com/abhi-kumar/opendetection/tree/cnn_cpu)</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;This example involves inclusion of three <span class="keyword">new</span> files:</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;  - <span class="stringliteral">&quot;opendetection/examples/objectdetector/od_cnn_mnist_classification.cpp&quot;</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  - <span class="stringliteral">&quot;opendetection/detectors/global2D/detection/ODConvClassification.cpp&quot;</span></div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  - <span class="stringliteral">&quot;opendetection/detectors/global2D/detection/ODConvClassification.h&quot;</span></div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;The Classification example has been implemented over the ODDetector2D <span class="keyword">class</span>. The <span class="keyword">new</span> ODConvClassification <span class="keyword">class </span>inherits from the abstract class ODDetector2D under the namespace od::g2d. LEts go over each file briefly.</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;**ODConvClassification.h &amp; ODConvClassification.cpp files**</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;The file involves inclusion of the following headers.</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;@code </div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;<span class="preprocessor">#include &quot;caffe/caffe.hpp&quot;</span></div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;<span class="preprocessor">#include &quot;caffe/util/io.hpp&quot;</span></div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;<span class="preprocessor">#include &quot;caffe/blob.hpp&quot;</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="keyword">using namespace </span>caffe;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="keyword">using namespace </span>cv;</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="keyword">@end</span>code</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;The first set involves the basic C++ headers, <span class="keywordflow">while</span> the last three headers are from the caffe library. The namespaces are</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  - caffe <span class="keywordflow">for</span> Caffe Modules</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;  - std <span class="keywordflow">for</span> C++ Standard Modules</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  - cv <span class="keywordflow">for</span> C++ OpenCV Modules</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;The variables involved are as follows</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;@code</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;<span class="keywordtype">string</span> weightModelFileLoaction;</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;<span class="keywordtype">string</span> networkFileLocation;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="keywordtype">string</span> imageFileLocation; </div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;Datum strucBlob;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;BlobProto protoBlob;</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;vector&lt;Blob&lt;float&gt;*&gt; inputBlob;</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;<span class="keyword">@end</span>code</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  - <span class="stringliteral">&quot;weightModelFileLoaction&quot;</span> stores the location of the trained weight caffemodel file.</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  - <span class="stringliteral">&quot;networkFileLocation&quot;</span> stores the location of the CNN network file.</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  - <span class="stringliteral">&quot;imageFileLocation&quot;</span> stores the location of the image to be classified.</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  - <span class="stringliteral">&quot;strucBlob&quot;</span> keeps the details of the blob structure of the image to be compiled.</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  - <span class="stringliteral">&quot;protoBlob&quot;</span> creates an initial storage <span class="keywordflow">for</span> the input image to be converted from image file to Caffe Blob named <span class="stringliteral">&quot;inputBlob&quot;</span></div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;Lets go through the functions involved in the process.</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  - @code</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <span class="keywordtype">void</span> ODConvClassification::setWeightModelFileLocation(<span class="keywordtype">string</span> location)</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    {</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;      ODConvClassification::weightModelFileLoaction = location;</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    }</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <span class="keywordtype">void</span> ODConvClassification::setNetworkModelFileLocation(<span class="keywordtype">string</span> location)</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    {</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      networkFileLocation = location;</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    }</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <span class="keywordtype">void</span> ODConvClassification::setImageFileLocation(<span class="keywordtype">string</span> location)</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    {</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      imageFileLocation = location;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    } </div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;  </div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="keywordtype">string</span> ODConvClassification::getWeightModelFileLocation()</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    {</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;Weight Model File Location = &quot;</span> &lt;&lt; weightModelFileLoaction &lt;&lt; endl;</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;      <span class="keywordflow">return</span> weightModelFileLoaction;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    }</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    </div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <span class="keywordtype">string</span> ODConvClassification::getNetworkModelFileLocation()</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    {</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;Network Model File Location = &quot;</span> &lt;&lt; networkFileLocation &lt;&lt; endl;</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;      <span class="keywordflow">return</span> networkFileLocation;</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    }</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    </div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <span class="keywordtype">string</span> ODConvClassification::getImageFileLocation()</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    {</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;Image File Location = &quot;</span> &lt;&lt; imageFileLocation &lt;&lt; endl;</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;      <span class="keywordflow">return</span> imageFileLocation;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    }</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    <span class="keyword">@end</span>code</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    These functions are uite <span class="keyword">self</span> explanatory. The first three functions are being used to <span class="keyword">get</span> the location of the reuired files, <span class="keywordflow">while</span> the rest are to retrieve these locations.</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  - @code <span class="keywordtype">void</span> ODConvClassification::setTestBlob(<span class="keywordtype">int</span> numChannels, <span class="keywordtype">int</span> imgHeight, <span class="keywordtype">int</span> imgWidth) <span class="keyword">@end</span>code This <span class="keyword">function</span> takes an input image and converts into a suitable format <span class="keywordflow">for</span> caffe libraries. @code</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      <span class="keywordflow">if</span> (!ReadImageToDatum(imageFileLocation, numChannels, imgHeight, imgWidth, &amp;strucBlob)) </div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      {</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;        cout &lt;&lt; <span class="stringliteral">&quot;Image File Not Found&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;        exit(0);</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      }</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;      Blob&lt;float&gt;* dataBlob = <span class="keyword">new</span> Blob&lt;float&gt;(1, strucBlob.channels(), strucBlob.height(), strucBlob.width());    </div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <span class="keyword">@end</span>code This snippet reads the image, and creates a structure to save the input image as a blob.@code</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;      <span class="keywordflow">if</span> (data.size() != 0) </div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      {</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; sizeStrucBlob; ++i)</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        {</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;          protoBlob.set_data(i, protoBlob.data(i) + (uint8_t)data[i]);</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;        }</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      }</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      dataBlob-&gt;FromProto(protoBlob);</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      inputBlob.push_back(dataBlob);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    <span class="keyword">@end</span>code The snippet mentioned above converts the image from the initial(<span class="stringliteral">&quot;.png&quot;</span>) format to the blob format required by the caffe library.</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  - The net is initailized with the network parameters and trained weights using the following snippet. @code</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      Caffe::set_mode(Caffe::CPU);</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      Net&lt;<span class="keywordtype">float</span>&gt;  net(networkFileLocation, TEST);</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      net.CopyTrainedLayersFrom(weightModelFileLoaction); @endcode And the net is asked to move forward and present the probaility using the following snippet. @code</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;const vector&lt;Blob&lt;<span class="keywordtype">float</span>&gt;*&gt;&amp; result =  net.Forward(inputBlob, &amp;type); @endcode This output vector, &quot;result&quot;, contains the probabilities for each of the classes, The class with the maximum probobiility or score is the classified class.</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;**The CMake Changes**</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;The od_mandatory_dependency.cmake file has been added a new line @code find_package( Caffe REQUIRED) @endcode And thus the inclusion of caffe include directory and caffe libraries. In the CMakeLists.txt file from detectors/global2D directory, the following snippet is added @code</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;ADD_DEFINITIONS(</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    -std=c++11 </div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  ${Caffe_DEFINITIONS}</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;)</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;@endcode This has been done to enable mode choice of caffe runtime, i.e., CPU or GPU, and in <span class="keyword">this</span> example CPU.</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;**Usage**</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;The example can be invoked <span class="keyword">using</span> the following command: (From the build folder)</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;./examples/objectdetector/od_cnn_mnist_classification ../examples/objectdetector/Mnist_Classify/mnist.caffemodel ../examples/objectdetector/Mnist_Classify/lenet.prototxt ../examples/objectdetector/Mnist_Classify/1.png</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;The example as shown above takes 3 arguments, the locations of the weight file, network file and the image.</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;**Next up will be a simple CNN trainer example.**</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;Happy Coding!!!! </div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;Training a classifier <span class="keywordflow">for</span> digits in Mnist Library <span class="keyword">using</span> CNN. Part 1 {#target2}</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;---</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;This particular inclusion presents a simple trainer in a most crude and easy way possible. The major requirements of CNN training <span class="keyword">using</span> caffe are</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  - Solver file</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;  - Training Network file</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;  - Image Dataset and a pointer to the Dataset</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;The classification example added to the library involves usage of caffe library. The modalities and usage of the libraries can be studied at</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;  - [Caffe Library](http:<span class="comment">//caffe.berkeleyvision.org/)</span></div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  - [Using Caffe Library](https:<span class="comment">//abhishek4273.com/2016/02/07/ann-chapter-3-deep-learning-using-caffe-python/)</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  - [Branch of OpenDetection <span class="keywordflow">for</span> the below classifier](https:<span class="comment">//github.com/abhi-kumar/opendetection/tree/cnn_cpu)</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;This example involves inclusion of three <span class="keyword">new</span> files:</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  - <span class="stringliteral">&quot;opendetection/examples/objectdetector/od_cnn_mnist_train_simple.cpp&quot;</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  - <span class="stringliteral">&quot;opendetection/detectors/global2D/training/ODConvTrainer.cpp&quot;</span></div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  - <span class="stringliteral">&quot;opendetection/detectors/global2D/training/ODConvTrainer.h&quot;</span></div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;**Invoking Training module of caffe**</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;These lines invoke the trainer: </div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;@code</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;      Caffe::set_mode(Caffe::CPU);</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      SGDSolver&lt;float&gt; s(solverLocation);</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      s.Solve();</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;<span class="keyword">@end</span>code</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;This snippet points to solver file, the solver file points to the network file. This network file points to the file which in turn points to the dataset.</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;**Usage**</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;The example can be invoked <span class="keyword">using</span> the following command: (From the build folder)</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;./examples/objectdetector/od_cnn_mnist_train_simple ../examples/objectdetector/Mnist_Train/solver1.prototxt</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;The only argument to be given is the solver file.</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;**Next up will be a simple CNN trainer example with a graphical user interface <span class="keywordflow">for</span> the solver file.**</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;Happy Coding!!!! </div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;Training a classifier <span class="keywordflow">for</span> digits in Mnist Library <span class="keyword">using</span> CNN. Part 2 {#target2_1}</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;---</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;This commit consists of the same simple trainer from previous commit, except <span class="keywordflow">for</span> the fact that it involves a graphical user <span class="keyword">interface </span>to select solver parameters,The classification exampled added to the library involves usage of caffe library. The modalities and usage of the libraries can be studied at</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  - [Caffe Library](http:<span class="comment">//caffe.berkeleyvision.org/)</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  - [Using Caffe Library](https:<span class="comment">//abhishek4273.com/2016/02/07/ann-chapter-3-deep-learning-using-caffe-python/)</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  - [Branch of OpenDetection for the below classifier](https:<span class="comment">//github.com/abhi-kumar/opendetection/tree/cnn_cpu)</span></div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  - [GTKMM](http:<span class="comment">//www.gtkmm.org/en/)</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;Installing GTKMM Required: In the terminal of ubuntu, type the following</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;@code  sudo apt-get install libglib2.0-dev libatk1.0* libpango1.0-dev libcairo2-dev gdk-pixbuf2.0-0 libsigc++-2.0-dev libgtk-3-dev libcairomm-1.0-dev libpangomm-1.4-dev libatkmm-1.6-dev libgtkmm-3.0-dev @endcode</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;**Usage**</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;From the build folder invoke:</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;./examples/objectdetector/od_cnn_mnist_train_customSolver</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;Note:</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  - The path to the solver, train network, snapshot have to be set inside examples/objectdetector/Mnist_Train folder for this alpha version.</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  - The GUI has a update button for every parameter. It is not necessary to press each one of them. They have been included for future, eg., when only one parameter from an existing solver need to be updated. This functionality has not been added</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  - After changing the parameters, press the &quot;Save&quot; button and then close the window using the &quot;x&quot; on the top just like closing any window in Ubuntu. A custom exit has not been added yet. </div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;**Next up will be a updates and additions to the GUI.**</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  - Adding a provision: if a solver file exists and the user wants to change only one parameters, it can be done</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  - Creation of CNN network using a simple GUI</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;Happy Coding!!!!</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;<div class="ttc" id="struct_node_html_aaa9e33aa02bd8bcd9282842aa799f2c3"><div class="ttname"><a href="struct_node.html#aaa9e33aa02bd8bcd9282842aa799f2c3">Node::nextLayer</a></div><div class="ttdeci">Node * nextLayer</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00007">node.h:7</a></div></div>
<div class="ttc" id="classannotation_html"><div class="ttname"><a href="classannotation.html">annotation</a></div><div class="ttdef"><b>Definition:</b> <a href="_o_d_annotation_8h_source.html#l00049">ODAnnotation.h:49</a></div></div>
<div class="ttc" id="classod_1_1g2d_1_1_o_d_conv_trainer_html_af1f228bf3c1e80be799768f85fb95ad1"><div class="ttname"><a href="classod_1_1g2d_1_1_o_d_conv_trainer.html#af1f228bf3c1e80be799768f85fb95ad1">od::g2d::ODConvTrainer::startTraining</a></div><div class="ttdeci">void startTraining()</div></div>
<div class="ttc" id="classimage_html"><div class="ttname"><a href="classimage.html">image</a></div><div class="ttdef"><b>Definition:</b> <a href="image_8h_source.html#l00027">image.h:27</a></div></div>
<div class="ttc" id="classimage_html_a51d9e4a8e20b9a5af2e11e0e4b39815a"><div class="ttname"><a href="classimage.html#a51d9e4a8e20b9a5af2e11e0e4b39815a">image::width</a></div><div class="ttdeci">int width() const </div><div class="ttdef"><b>Definition:</b> <a href="image_8h_source.html#l00042">image.h:42</a></div></div>
<div class="ttc" id="namespaceod_1_1g2d_html_a8f24a57c183fd50da7fcce9e6e9ef436"><div class="ttname"><a href="namespaceod_1_1g2d.html#a8f24a57c183fd50da7fcce9e6e9ef436">od::g2d::extractROIs</a></div><div class="ttdeci">vector&lt; vector&lt; int &gt; &gt; extractROIs(int total_masks, ODSelectiveSearchModel regions[], int numRounds, float spSize, vector&lt; vector&lt; int &gt; &gt; sp, Mat img, Mat gray_mask, int minRegionSize, int histSize, float hist_range_min, float hist_range_max)</div></div>
<div class="ttc" id="classod_1_1g2d_1_1_o_d_selective_search_model_html"><div class="ttname"><a href="classod_1_1g2d_1_1_o_d_selective_search_model.html">od::g2d::ODSelectiveSearchModel</a></div><div class="ttdef"><b>Definition:</b> <a href="_o_d_selective_search_model_8h_source.html#l00042">ODSelectiveSearchModel.h:42</a></div></div>
<div class="ttc" id="classod_1_1g2d_1_1_o_d_conv_trainer_html_a3c46e781fb546a23279ab29fbd23a77e"><div class="ttname"><a href="classod_1_1g2d_1_1_o_d_conv_trainer.html#a3c46e781fb546a23279ab29fbd23a77e">od::g2d::ODConvTrainer::setSolverLocation</a></div><div class="ttdeci">void setSolverLocation(string location)</div></div>
<div class="ttc" id="class_solver_properties_html"><div class="ttname"><a href="class_solver_properties.html">SolverProperties</a></div><div class="ttdef"><b>Definition:</b> <a href="solver_8h_source.html#l00012">solver.h:12</a></div></div>
<div class="ttc" id="namespaceod_1_1g2d_html_a5cf5355ae46651c7576e57b4afa3c209"><div class="ttname"><a href="namespaceod_1_1g2d.html#a5cf5355ae46651c7576e57b4afa3c209">od::g2d::refineRegions</a></div><div class="ttdeci">void refineRegions(vector&lt; vector&lt; int &gt; &gt; sp, int total_masks, ODSelectiveSearchModel regions[], int min_height, int min_width)</div></div>
<div class="ttc" id="classod_1_1g2d_1_1_o_d_conv_trainer_html"><div class="ttname"><a href="classod_1_1g2d_1_1_o_d_conv_trainer.html">od::g2d::ODConvTrainer</a></div><div class="ttdef"><b>Definition:</b> <a href="_o_d_conv_trainer_8h_source.html#l00033">ODConvTrainer.h:33</a></div></div>
<div class="ttc" id="classimage_html_a7703c5fa4f43e3aedb28c6056ac7d96a"><div class="ttname"><a href="classimage.html#a7703c5fa4f43e3aedb28c6056ac7d96a">image::height</a></div><div class="ttdeci">int height() const </div><div class="ttdef"><b>Definition:</b> <a href="image_8h_source.html#l00045">image.h:45</a></div></div>
<div class="ttc" id="struct_node_html"><div class="ttname"><a href="struct_node.html">Node</a></div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00004">node.h:4</a></div></div>
<div class="ttc" id="struct_node_html_afa559ea7058661196a500141f93c9205"><div class="ttname"><a href="struct_node.html#afa559ea7058661196a500141f93c9205">Node::data</a></div><div class="ttdeci">Glib::ustring data</div><div class="ttdef"><b>Definition:</b> <a href="node_8h_source.html#l00005">node.h:5</a></div></div>
<div class="ttc" id="namespaceod_1_1g2d_html_a4f8d695d48676f65224899d29ecd414b"><div class="ttname"><a href="namespaceod_1_1g2d.html#a4f8d695d48676f65224899d29ecd414b">od::g2d::createModel</a></div><div class="ttdeci">void createModel(vector&lt; vector&lt; int &gt; &gt; sp, int total_masks, Mat grayMask, ODSelectiveSearchModel regions[], int histSize, float hist_range_min, float hist_range_max)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>gsoc2016_blog_abhishek.md</b></li>
    <li class="footer">Send your queries <a href="mailto:kripasindhu.sarkar@dfki.de?Subject=OpenDetection" target="_top">here</a>.</li>
  </ul>
</div>
</body>
</html>
